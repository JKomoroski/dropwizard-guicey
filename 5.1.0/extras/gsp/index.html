



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Dropwizard guice integration">
      
      
        <link rel="canonical" href="https://xvik.github.io/dropwizard-guicey/5.1.0/extras/gsp/">
      
      
        <meta name="author" content="Vyacheslav Rusakov">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Server Pages - Dropwizard-guicey</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-93174150-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#guicey-server-pages" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://xvik.github.io/dropwizard-guicey/5.1.0" title="Dropwizard-guicey" aria-label="Dropwizard-guicey" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Dropwizard-guicey
            </span>
            <span class="md-header-nav__topic">
              
                Server Pages
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/xvik/dropwizard-guicey/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    dropwizard-guicey
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../guide/configuration/" class="md-tabs__link">
          User guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../installers/resource/" class="md-tabs__link">
          Installers
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../bom/" class="md-tabs__link md-tabs__link--active">
          Modules
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../examples/authentication/" class="md-tabs__link">
          Examples
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../about/release-notes/" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://xvik.github.io/dropwizard-guicey/5.1.0" title="Dropwizard-guicey" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Dropwizard-guicey
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/xvik/dropwizard-guicey/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    dropwizard-guicey
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../concepts/" title="Concepts overview" class="md-nav__link">
      Concepts overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../guice/" title="Guice" class="md-nav__link">
      Guice
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../tests/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../decomposition/" title="Decomposition" class="md-nav__link">
      Decomposition
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      User guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        User guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/extensions/" title="Extensions" class="md-nav__link">
      Extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/web/" title="Web" class="md-nav__link">
      Web
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/modules/" title="Extra integrations" class="md-nav__link">
      Extra integrations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/bundles/" title="Bundles" class="md-nav__link">
      Bundles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/yaml-values/" title="Yaml values" class="md-nav__link">
      Yaml values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-7" type="checkbox" id="nav-7-7">
    
    <label class="md-nav__link" for="nav-7-7">
      Guice
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-7">
        Guice
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/injector/" title="Injector" class="md-nav__link">
      Injector
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/bindings/" title="Bindings" class="md-nav__link">
      Bindings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/scopes/" title="Scopes" class="md-nav__link">
      Scopes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/module-autowiring/" title="Module autowiring" class="md-nav__link">
      Module autowiring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/module-analysis/" title="Modules analysis" class="md-nav__link">
      Modules analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/override/" title="Override bindings" class="md-nav__link">
      Override bindings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/servletmodule/" title="ServletModule" class="md-nav__link">
      ServletModule
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-8" type="checkbox" id="nav-7-8">
    
    <label class="md-nav__link" for="nav-7-8">
      Diagnostic
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-8">
        Diagnostic
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/diagnostic-tools/" title="Tools" class="md-nav__link">
      Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/configuration-report/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/configuration-model/" title="Configuration model" class="md-nav__link">
      Configuration model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/installers-report/" title="Installers" class="md-nav__link">
      Installers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/yaml-values-report/" title="Yaml values" class="md-nav__link">
      Yaml values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/lifecycle-report/" title="Lifecycle" class="md-nav__link">
      Lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/guice-report/" title="Guice" class="md-nav__link">
      Guice
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/aop-report/" title="AOP" class="md-nav__link">
      AOP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/web-report/" title="Web" class="md-nav__link">
      Web
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/jersey-report/" title="Jersey" class="md-nav__link">
      Jersey
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-9" type="checkbox" id="nav-7-9">
    
    <label class="md-nav__link" for="nav-7-9">
      Test
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-9">
        Test
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/test/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/test/junit5/" title="Junit 5" class="md-nav__link">
      Junit 5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/test/spock/" title="Spock" class="md-nav__link">
      Spock
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/test/junit4/" title="Junit 4" class="md-nav__link">
      Junit 4
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/lifecycle/" title="Lifecycle" class="md-nav__link">
      Lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/scan/" title="Classpath scan" class="md-nav__link">
      Classpath scan
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/installers/" title="Installers" class="md-nav__link">
      Installers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/ordering/" title="Ordering" class="md-nav__link">
      Ordering
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/options/" title="Options" class="md-nav__link">
      Options
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/events/" title="Events" class="md-nav__link">
      Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/disables/" title="Disables" class="md-nav__link">
      Disables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/deduplication/" title="De-duplication" class="md-nav__link">
      De-duplication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/commands/" title="Commands" class="md-nav__link">
      Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/hooks/" title="Hooks" class="md-nav__link">
      Hooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/shared/" title="Shared state" class="md-nav__link">
      Shared state
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/hk2/" title="HK2" class="md-nav__link">
      HK2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Installers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Installers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/resource/" title="Resource" class="md-nav__link">
      Resource
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/task/" title="Task" class="md-nav__link">
      Task
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/managed/" title="Managed" class="md-nav__link">
      Managed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/lifecycle/" title="Lifecycle" class="md-nav__link">
      Lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/healthcheck/" title="Health check" class="md-nav__link">
      Health check
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/jersey-ext/" title="Jersey extension" class="md-nav__link">
      Jersey extension
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/jersey-feature/" title="Jersey feature" class="md-nav__link">
      Jersey feature
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/eager/" title="Eager singleton" class="md-nav__link">
      Eager singleton
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/plugin/" title="Plugin" class="md-nav__link">
      Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/servlet/" title="Web servlet" class="md-nav__link">
      Web servlet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/filter/" title="Web filter" class="md-nav__link">
      Web filter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/listener/" title="Web listener" class="md-nav__link">
      Web listener
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9" checked>
    
    <label class="md-nav__link" for="nav-9">
      Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../bom/" title="BOM" class="md-nav__link">
      BOM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../admin-rest/" title="Admin REST" class="md-nav__link">
      Admin REST
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lifecycle-annotations/" title="Lifecycle annotations" class="md-nav__link">
      Lifecycle annotations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eventbus/" title="Guava EventBus" class="md-nav__link">
      Guava EventBus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../jdbi/" title="JDBI" class="md-nav__link">
      JDBI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../jdbi3/" title="JDBI3" class="md-nav__link">
      JDBI3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spa/" title="SPA" class="md-nav__link">
      SPA
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Server Pages
      </label>
    
    <a href="./" title="Server Pages" class="md-nav__link md-nav__link--active">
      Server Pages
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#problem" class="md-nav__link">
    Problem
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    Solution
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template-engines" class="md-nav__link">
    Template engines
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applications" class="md-nav__link">
    Applications
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template-engine-constraint" class="md-nav__link">
    Template engine constraint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templates-support" class="md-nav__link">
    Templates support
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#direct-templates" class="md-nav__link">
    Direct templates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-rest-declaration" class="md-nav__link">
    Template rest declaration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template" class="md-nav__link">
    @Template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templatecontext" class="md-nav__link">
    TemplateContext
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#index-page" class="md-nav__link">
    Index page
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-pages" class="md-nav__link">
    Error pages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spa-routing" class="md-nav__link">
    SPA routing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-requests-detection" class="md-nav__link">
    Template requests detection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extending-applications" class="md-nav__link">
    Extending applications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webjars-usage" class="md-nav__link">
    Webjars usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-classloaders" class="md-nav__link">
    Custom classloaders
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../validation/" title="Validation" class="md-nav__link">
      Validation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/authentication/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/governator/" title="Governator" class="md-nav__link">
      Governator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/hibernate/" title="Hibernate" class="md-nav__link">
      Hibernate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/eventbus/" title="EventBus" class="md-nav__link">
      EventBus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/jdbi/" title="JDBI" class="md-nav__link">
      JDBI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/jdbi3/" title="JDBI3" class="md-nav__link">
      JDBI3
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/release-notes/" title="Release notes" class="md-nav__link">
      Release notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/compatibility/" title="Compatibility" class="md-nav__link">
      Compatibility
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/history/" title="Version history" class="md-nav__link">
      Version history
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#problem" class="md-nav__link">
    Problem
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    Solution
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template-engines" class="md-nav__link">
    Template engines
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applications" class="md-nav__link">
    Applications
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template-engine-constraint" class="md-nav__link">
    Template engine constraint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templates-support" class="md-nav__link">
    Templates support
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#direct-templates" class="md-nav__link">
    Direct templates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-rest-declaration" class="md-nav__link">
    Template rest declaration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template" class="md-nav__link">
    @Template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templatecontext" class="md-nav__link">
    TemplateContext
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#index-page" class="md-nav__link">
    Index page
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-pages" class="md-nav__link">
    Error pages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spa-routing" class="md-nav__link">
    SPA routing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-requests-detection" class="md-nav__link">
    Template requests detection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extending-applications" class="md-nav__link">
    Extending applications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webjars-usage" class="md-nav__link">
    Webjars usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-classloaders" class="md-nav__link">
    Custom classloaders
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/xvik/dropwizard-guicey/edit/master/src/doc/docs/extras/gsp.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="guicey-server-pages">Guicey Server Pages<a class="headerlink" href="#guicey-server-pages" title="Permanent link">&para;</a></h1>
<div class="admonition summary">
<p><a href="https://github.com/xvik/dropwizard-guicey-ext/tree/master/guicey-server-pages">Extensions project</a> module</p>
</div>
<p>Brings the simplicity of JSP to dropwizard-views. 
Basement for pluggable and extendable ui applications (like dashboards).</p>
<div class="admonition warning">
<p><strong>EXPERIMENTAL MODULE</strong> </p>
</div>
<p>Features:</p>
<ul>
<li>Use standard dropwizard modules: <a href="https://www.dropwizard.io/en/release-2.0.x/manual/views.html">dropwizard-views</a> and <a href="https://www.dropwizard.io/en/release-2.0.x/manual/core.html#serving-assets">dropwizard-assets</a></li>
<li>Support direct templates rendering (without rest resource declaration) </li>
<li>Static resources, direct templates and dropwizard-views rest endpoints are handled under the same url
(like everything is stored in the same directory - easy to link css, js and other resources)</li>
<li>Multiple ui applications declaration with individual errors handling (error pages declaration like in servlet api, but not global)</li>
<li>Ability to extend applications (much like good old resources copying above exploded war in tomcat)</li>
</ul>
<h2 id="problem">Problem<a class="headerlink" href="#problem" title="Permanent link">&para;</a></h2>
<p>Suppose you want to serve your ui to from the root url, then you need to re-map rest:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">server</span><span class="p">:</span>
  <span class="nt">rootPath</span><span class="p">:</span> <span class="s">&#39;/rest/*&#39;</span>
  <span class="nt">applicationContextPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/</span>
</code></pre></div>

<p>Static resources are in classpath:</p>
<div class="codehilite"><pre><span></span><code>com/something/
    index.html
    style.css
</code></pre></div>

<p>Using dropwizard assets bundle to configure application:</p>
<div class="codehilite"><pre><span></span><code><span class="n">bootstrap</span><span class="p">.</span><span class="na">addBundle</span><span class="p">(</span><span class="k">new</span> <span class="n">AssetsBundle</span><span class="p">(</span><span class="s">&quot;/com/something/&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="s">&quot;index.html&quot;</span><span class="p">));</span>
</code></pre></div>

<p>Note that <code>index.html</code> could reference css with relative path:</p>
<div class="codehilite"><pre><span></span><code><span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;style.css&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span><span class="p">&gt;</span>
</code></pre></div>

<p>Now if we want to use template instead of pure html we configure dropwizard views:</p>
<div class="codehilite"><pre><span></span><code><span class="n">bootstrap</span><span class="p">.</span><span class="na">addBundle</span><span class="p">(</span><span class="k">new</span> <span class="n">ViewBundle</span><span class="o">&lt;</span><span class="n">MyConfiguration</span><span class="o">&gt;</span><span class="p">());</span>
</code></pre></div>

<p>Renaming <code>index.html</code> to <code>index.ftl</code> and add view resource:</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/ui/&quot;</span><span class="p">)</span>
<span class="nd">@Produces</span><span class="p">(</span><span class="n">MediaType</span><span class="p">.</span><span class="na">TEXT_HTML</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">IndexResource</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">IndexView</span> <span class="kd">extends</span> <span class="n">View</span> <span class="p">{</span>
        <span class="kd">public</span> <span class="nf">IndexView</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">super</span><span class="p">(</span><span class="s">&quot;/com/something/index.ftl&quot;</span><span class="p">);</span>
        <span class="p">}</span> 
    <span class="p">}</span>

    <span class="nd">@GET</span>
    <span class="kd">public</span> <span class="n">IndexView</span> <span class="nf">get</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">IndexView</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>As a result, index page url become <code>/rest/ui/</code> so we need to link css resource with full path (<code>/style.css</code>) instead of relative
(or even re-configure server to back rest mapping to into root).</p>
<p>It is already obvious that asset servlet and templates are not play well together.</p>
<h3 id="solution">Solution<a class="headerlink" href="#solution" title="Permanent link">&para;</a></h3>
<p>The solution is obvious: make assets servlet as major resources supplier and with an additional filter to
detect template requests and redirect rendering to actual rest.</p>
<p>So example above should become:</p>
<div class="codehilite"><pre><span></span><code>com/something/
    index.ftl
    style.css
</code></pre></div>

<p>Where <code>index.ftl</code> could use</p>
<div class="codehilite"><pre><span></span><code><span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;style.css&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span><span class="p">&gt;</span>
</code></pre></div>

<p>because it is queried by url <code>/index.ftl</code>: no difference with usual <code>index.html</code> - template rendering is hidden
(and direct template file even don't need custom resource). </p>
<p>When we need custom resource (most likely, for parameters mapping) we can still use it:</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/views/ui/&quot;</span><span class="p">)</span>
<span class="nd">@Template</span><span class="p">(</span><span class="s">&quot;foo.ftl&quot;</span><span class="p">)</span>
<span class="nd">@Produces</span><span class="p">(</span><span class="n">MediaType</span><span class="p">.</span><span class="na">TEXT_HTML</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">IndexResource</span> <span class="p">{</span>

    <span class="nd">@GET</span>
    <span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/foo/{id}&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">IndexView</span> <span class="nf">get</span><span class="p">(</span><span class="nd">@PathParam</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">)</span> <span class="n">String</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">TemplateView</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>It would be accessible from assets root <code>/foo/12</code> (more on naming and mapping details below).
Under the hood <code>/foo/12</code> will be recognized as template call and redirected (server redirect) to <code>/rest/ui/foo/12</code>. </p>
<p>As you can see rest endpoints and templates are now "a part" of static resources.. just like good-old 
JSP (powered with rest mappings). And it is still pure dropwizard views.</p>
<p>GSP implements per-application error pages support so each application could use it's own errors. In pure 
dropwizard-views such things should be implemented manually, which is not good for application incapsulation.</p>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<p><a href="https://bintray.com/vyarus/xvik/dropwizard-guicey-ext/_latestVersion"><img alt="JCenter" src="https://img.shields.io/bintray/v/vyarus/xvik/dropwizard-guicey-ext.svg?label=jcenter" /></a>
<a href="https://maven-badges.herokuapp.com/maven-central/ru.vyarus.guicey/guicey-gsp"><img alt="Maven Central" src="https://img.shields.io/maven-central/v/ru.vyarus.guicey/guicey-server-pages.svg?style=flat" /></a></p>
<p>Avoid version in dependency declaration below if you use <a href="../guicey-bom">extensions BOM</a>. </p>
<p>Maven:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>ru.vyarus.guicey<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>guicey-server-pages<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>5.1.0-1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>

<p>Gradle:</p>
<div class="codehilite"><pre><span></span><code><span class="n">compile</span> <span class="s1">&#39;ru.vyarus.guicey:guicey-server-pages:5.1.0-1&#39;</span>
</code></pre></div>

<p>See the most recent version in the badge above.</p>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<p>First of all, global GSP bundle must be installed in main application class. It 
configures and installs dropwizard-views (global). It supports the same configurations as
pure dropwizard-views bundle.</p>
<div class="codehilite"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
    <span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">build</span><span class="p">());</span>
</code></pre></div>

<div class="admonition warning">
<p>Remove direct dropwizard-views bundle registrations (<code>ViewBundle</code>) if it was already used in application.  </p>
</div>
<h3 id="template-engines">Template engines<a class="headerlink" href="#template-engines" title="Permanent link">&para;</a></h3>
<p>Out of the box <a href="https://www.dropwizard.io/en/release-2.0.x/manual/views.html">dropwizard provides</a> <code>freemarker</code> and <code>mustache</code> engines support. 
You will need to add dependency to one of them (or both) in order to activate it (or, maybe, some third party engine):</p>
<ul>
<li>implementation (<code>io.dropwizard:dropwizard-views-freemarker</code>) </li>
<li>implementation (<code>io.dropwizard:dropwizard-views-mustache</code>)</li>
</ul>
<p>Other template engines available as 3<sup>rd</sup> party modules. If your template engine is not yet supported
then simply implement <code>io.dropwizard.views.ViewRenderer</code> in order to support it.</p>
<p><code>ViewRenderer</code> implementations are loaded automatically using ServiceLoader mechanism. 
If your renderer is not declared as service then simply add it directly:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
        <span class="p">.</span><span class="na">addViewRenderers</span><span class="p">(</span><span class="k">new</span> <span class="n">MyTempateSupport</span><span class="p">())</span>
        <span class="p">.</span><span class="na">build</span><span class="p">());</span>
</code></pre></div>

<p>Duplicate renderers are automatically removed.</p>
<p>List of detected template engines will be printed to console. You can get list of used renderers
from bundle instance <code>ServerPagesBundle#getRenderers()</code>  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is pure dropwizard-views staff (everything is totally standard).</p>
</div>
<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h3>
<p>Views yaml configuration binding is the same as in dropwizard-views.</p>
<div class="codehilite"><pre><span></span><code><span class="nt">views</span><span class="p">:</span>
  <span class="nt">freemarker</span><span class="p">:</span>
    <span class="nt">strict_syntax</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">mustache</span><span class="p">:</span>
    <span class="nt">cache</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>

<p>Where <code>freemarker</code> and <code>mustache</code> are keys from installed template renderer 
<code>io.dropwizard.views.ViewRenderer#getConfigurationKey()</code>. </p>
<div class="codehilite"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppConfig</span> <span class="kd">extends</span> <span class="n">Configuration</span> <span class="p">{</span>
    <span class="nd">@JsonProperty</span>
    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">views</span><span class="p">;</span>

    <span class="kd">public</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;&gt;</span> <span class="nf">getViews</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">views</span><span class="p">;}</span> 
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
        <span class="p">.</span><span class="na">viewsConfiguration</span><span class="p">(</span><span class="n">AppConfig</span><span class="p">::</span><span class="n">getViews</span><span class="p">)</span>
        <span class="p">.</span><span class="na">build</span><span class="p">());</span>
</code></pre></div>

<p>If <code>AppConfig#getViews</code> return <code>null</code> then empty map will be used instead as config.</p>
<p>Additionally, to direct yaml configuration binding, you can apply exact template engine modifications</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
        <span class="p">.</span><span class="na">viewsConfiguration</span><span class="p">(</span><span class="n">AppConfig</span><span class="p">::</span><span class="n">getViews</span><span class="p">)</span>
        <span class="p">.</span><span class="na">viewsConfigurationModifier</span><span class="p">(</span><span class="s">&quot;freemarker&quot;</span><span class="p">,</span> 
                <span class="n">map</span> <span class="o">-&gt;</span> <span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;cache_storage&quot;</span><span class="p">,</span> <span class="s">&quot;freemarker.cache.NullCacheStorage&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">build</span><span class="p">());</span>
</code></pre></div>

<p>Modifier always receive not null map (empty map is created automatically in global configuration).</p>
<p>Multiple modifiers could be applied (even for the same section). Each GSP application could also apply modifiers
(this is useful to tune defaults: e.g. in case of freemarker, application may need to apply default imports).</p>
<p>The final configuration (after all modifiers) could be printed to console with <code>.printViewsConfiguration()</code>.
Also, configuration is accessible from the bundle instance: <code>ServerPagesBundle#getViewsConfig()</code>.</p>
<h2 id="applications">Applications<a class="headerlink" href="#applications" title="Permanent link">&para;</a></h2>
<p>Each GSP application is registered as separate bundle in main or admin context:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="p">,</span> <span class="s">&quot;com.app.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">indexPage</span><span class="p">(</span><span class="s">&quot;index.ftl&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">build</span><span class="p">())</span>

<span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">adminApp</span><span class="p">(</span><span class="s">&quot;projectName-admin&quot;</span><span class="p">,</span> <span class="s">&quot;com.app.admin&quot;</span><span class="p">,</span> <span class="s">&quot;/admin&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">build</span><span class="p">())</span>                    
</code></pre></div>

<p>Unlimited number of applications may be registered on each context.</p>
<div class="codehilite"><pre><span></span><code><span class="n">app</span><span class="p">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="p">,</span> <span class="s">&quot;com.app.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
</code></pre></div>

<ul>
<li><code>projectName-ui</code> - unique(!) application name. Uniqueness is very important as name used for rest paths.
    To avoid collisions it's recommended to use domain-prefixed names to better identify application related resources. </li>
<li><code>com.app.ui</code> - classpath package with resources (application "root" folder; the same meaning as in dropwizard-assets);
    Also, it may be configured as <code>/com/app/ui/</code>, but package notion is easier to understand </li>
<li><code>/</code> - application mapping url (in main or admin context; the same as in dropwizard-assets)
    (if context is prefixed (<code>server.applicationContextPath: /some</code> or <code>server.adminContextPath: /admin</code>) then GSP 
    application will be available under this prefix)</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is a common desire to map ui on main context's root path (<code>/</code>), but, by default, dropwizard
maps rest there and so you may see an error:</p>
</div>
<div class="codehilite"><pre><span></span><code>java.lang.IllegalStateException: Multiple servlets map to path /*: app[mapped:JAVAX_API:null],io.dropwizard.jersey.setup.JerseyServletContainer-1280682[mapped:EMBEDDED:null]
</code></pre></div>

<p>In this case simply re-map rest in yaml config:
<div class="codehilite"><pre><span></span><code><span class="nt">server</span><span class="p">:</span>
  <span class="nt">rootPath</span><span class="p">:</span> <span class="s">&#39;/rest/*&#39;</span>
</code></pre></div></p>
<p>If application requires resources from multiple paths, use:</p>
<div class="codehilite"><pre><span></span><code><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="p">,</span> <span class="s">&quot;com.app.path1&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">attachAssets</span><span class="p">(</span><span class="s">&quot;com.app.path1&quot;</span><span class="p">)</span>
    <span class="p">...</span>
</code></pre></div>

<p>For example, this can be useful to attach some shared resources.
To attach webjars there is a <a href="#webjars-usage">pre-defined shortcut</a>.</p>
<p>You can even attach resources path for exact sub url:</p>
<div class="codehilite"><pre><span></span><code><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="p">,</span> <span class="s">&quot;com.app.path1&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">attachAssets</span><span class="p">(</span><span class="s">&quot;/sub/path/&quot;</span><span class="p">,</span> <span class="s">&quot;com.app.path.sub&quot;</span><span class="p">)</span>
    <span class="p">...</span>
</code></pre></div>

<p>And for urls starting from <code>/sub/path/</code> application will look static resources
(and templates) inside <code>/com/app/path/sub/</code> first, and only after that under root paths. </p>
<p>This way, you can map resources from different packages as you want. This is like
if you copied everything from different packages into one place (like exploded war).</p>
<h3 id="template-engine-constraint">Template engine constraint<a class="headerlink" href="#template-engine-constraint" title="Permanent link">&para;</a></h3>
<p>As GSP application declaration is separated from views configuration (GSP application
may be even a 3<sup>rd</sup> party bundle) then it must be able to check required template engines presence.</p>
<p>For example, this application requires freemarker:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="p">,</span> <span class="s">&quot;com.app.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">requireRenderers</span><span class="p">(</span><span class="s">&quot;freemarker&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">build</span><span class="p">())</span>
</code></pre></div>

<p>Template engine name is declared in <code>io.dropwizard.views.ViewRenderer#getConfigurationKey()</code> (same name used in configuration).   </p>
<h3 id="templates-support">Templates support<a class="headerlink" href="#templates-support" title="Permanent link">&para;</a></h3>
<p>As dropwizard-views is used under the hood, all templates are always rendered with
rest endpoints. All these rest endpoints are part of global rest.</p>
<p>It is recommended to start all view rest with <code>/view/</code> to make it clearly distinguishable
from application rest. Also, rest views, related to one GSP application must also start
with a common prefix: for example, <code>/view/projectName/ui/..</code>.</p>
<p>You need to map required rest prefix in GSP application:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="p">,</span> <span class="s">&quot;com.app.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">mapViews</span><span class="p">(</span><span class="s">&quot;/view/projectName/ui/&quot;</span><span class="p">)</span>
</code></pre></div>

<p>This will "map" all view rest paths after prefix directly to GSP application root.
So if you have view resource <code>/view/projectName/ui/page1/action</code> you can access it
relatively to application mapping root ("/" in the example above) as <code>/page1/action</code>.</p>
<p>By default, if views mapping is not declared manually, it would be set to application name
(<code>/...</code> -&gt; <code>/projectName-ui/...</code>)</p>
<p>Under startup dropwizard logs all registered rest enpoints, so you can always see original
rest mapping paths. For each registered GSP application list of "visible" paths will be logged as: </p>
<div class="codehilite"><pre><span></span><code>INFO  [2019-06-07 04:10:47,978] io.dropwizard.jersey.DropwizardResourceConfig: The following paths were found for the configured resources:

    GET     /rest/views/projectName/ui/sample (com.project.ui.SampleViewResource)
    POST    /rest/views/projectName/ui/other (com.project.ui.SampleViewResource)

INFO  [2019-06-07 04:10:47,982] ru.vyarus.guicey.gsp.app.ServerPagesApp: Server pages app &#39;com.project.ui&#39; registered on uri &#39;/*&#39; in main context

    Static resources locations:
        com.app.ui

    Mapped handlers:
        GET     /sample  (com.project.ui.SampleViewResource #sample)
        POST    /other  (com.project.ui.SampleViewResource #other)
</code></pre></div>

<p>Here you can see real rest mapping <code>GET     /rest/views/projectName/ui/sample</code> and
how it could be used relative to application path <code>GET     /sample</code>. </p>
<p>This report will always contain all correct view paths which must simplify overall understanding:
if path not appear in the report - it's incorrectly mapped and when it's appear - always use the path
from application report to access it.</p>
<p>But that's not all: you can actually map other rest prefixed to sub urls:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="p">,</span> <span class="s">&quot;com.app.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">mapViews</span><span class="p">(</span><span class="s">&quot;/sub/path/&quot;</span><span class="p">,</span> <span class="s">&quot;/view/projectName2/ui/something/&quot;</span><span class="p">)</span>
</code></pre></div>

<p>This way, it is possible to combine rest endpoints, written for different applications
(or simply prerare common view resource groups). Just note that in contrast to resources
mapping, only one prefix may be mapped on each url!</p>
<p>You will also need to map static resources location accordingly if you use relative template paths.</p>
<h4 id="direct-templates">Direct templates<a class="headerlink" href="#direct-templates" title="Permanent link">&para;</a></h4>
<p>You can also render template files without declaring view rest at all (good old jsp way).</p>
<p>If we call supported template type directly like <code>http://localhost:8080/template.ftl</code> it will be recognized
as direct template call and rendered. Template file must be placed under registered classpath path root:
<code>/com/app/ui/template.ftl</code>.</p>
<p>Templates in sub folders will be rendered the same way, e.g. <code>http://localhost:8080/sub/path/template.ftl</code>
will render <code>/com/app/ui/sub/path/template.ftl</code>. </p>
<h3 id="template-rest-declaration">Template rest declaration<a class="headerlink" href="#template-rest-declaration" title="Permanent link">&para;</a></h3>
<p>Declaration differences with pure dropwizard-views:</p>
<ul>
<li><code>@Path</code> value must start with mapped prefix (see the chapter above) </li>
<li>Resource class must be annotated with <code>@Template</code> (even without exact template declaration)</li>
<li><code>TemplateView</code> must be used instead of dropwizard <code>View</code> as a base class for view models.</li>
</ul>
<p>Suppose we declaring page for gsp application <code>.app("projectName-ui", "com.app.ui", "/")</code></p>
<p>As in pure views, in most cases we will need custom model object:</p>
<div class="codehilite"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleView</span> <span class="kd">extends</span> <span class="n">TemplateView</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">SampleView</span><span class="p">(</span><span class="n">String</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="p">;</span> <span class="p">}</span> 
<span class="p">}</span>
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Custom model is optional - you can use <code>TemplateView</code> directly, as default "empty" model.</p>
</div>
<div class="codehilite"><pre><span></span><code><span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/views/projectName/ui/sample/&quot;</span><span class="p">)</span>
<span class="nd">@Template</span><span class="p">(</span><span class="s">&quot;sample.ftl&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SamplePage</span> <span class="p">{</span>

    <span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;{name}&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">SampleView</span> <span class="nf">doSomething</span><span class="p">(</span><span class="nd">@PathParam</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span> <span class="n">String</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">SampleView</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>        
    <span class="p">}</span>    
<span class="p">}</span>
</code></pre></div>

<p>And example template:</p>
<div class="codehilite"><pre><span></span><code>&lt;#-- @ftlvariable name=&quot;&quot; type=&quot;com.project.ui.SampleView&quot; --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Sample page&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
    Name: ${name}
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>

<p>After application startup, new url must appear in GSP application console report.</p>
<p>If we call new page with <code>http://localhost:8080/sample/fred</code> we should see
<code>Name: fred</code> as a result.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Can pure dropwizard-views resources be used like that? Actually, yes, but
they must be annotated with <code>@Template</code> because not annotated resources are not 
considered as potential GSP application views (and will not be shown in console report).</p>
</div>
<h4 id="template">@Template<a class="headerlink" href="#template" title="Permanent link">&para;</a></h4>
<p><code>@Template</code> annotation must be used on ALL template resources. It may declare default
template for all methods in resource (<code>@Template("sample.ftl")</code>) or be just a marker annotation (<code>@Template</code>).</p>
<p>Annotation differentiate template resources from other api resources and lets you delare jersey
extension only for template resources:</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@Provider</span>
<span class="nd">@Template</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyExtensions</span> <span class="kd">implements</span> <span class="n">ContainerRequestFilter</span> <span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span> 
</code></pre></div>

<p>This request filter will be applied only to template resources. Such targeting is used 
internally in order to not affect global api with GSP specific handling logic.</p>
<p>Template path resolution:</p>
<ul>
<li>If path starts with <code>/</code> then it would be resolved from classpath root</li>
<li>Resolution relative to resource class</li>
<li>Resolution relative to static resources location (<code>/com/app/ui/</code> in the example above) </li>
</ul>
<p>Examples: </p>
<ul>
<li><code>@Template("/com/project/custom/path/sample.ftl")</code> - absolute declaration.</li>
<li><code>@Template("sub/sample.ftl")</code> - relative declaration</li>
<li><code>@Template("../sub/sample.ftl")</code> - relative declaration</li>
</ul>
<p>Even if template is configured in the annotation, exact resource method could specify it's own 
template directly in <code>TemplateView</code> constructor:</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/views/projectName/ui/sample/&quot;</span><span class="p">)</span>
<span class="nd">@Template</span><span class="p">(</span><span class="s">&quot;sample.ftl&quot;</span><span class="p">)</span>  <span class="c1">// default template</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SamplePage</span> <span class="p">{</span>

    <span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">TemplateView</span> <span class="nf">doSomething</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// override template</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">TemplateView</span><span class="p">(</span><span class="s">&quot;otherTemplate.ftl&quot;</span><span class="p">);</span>        
    <span class="p">}</span>    
<span class="p">}</span>
</code></pre></div>

<p>Template path resolution rules are the same as with annotation.</p>
<h4 id="templatecontext">TemplateContext<a class="headerlink" href="#templatecontext" title="Permanent link">&para;</a></h4>
<p><code>TemplateContext</code> contains all template contextual information. It could be accessed inside template
with model's <code>getContext()</code>, e.g.:</p>
<div class="codehilite"><pre><span></span><code>&lt;#-- @ftlvariable name=&quot;&quot; type=&quot;com.project.ui.SampleView&quot; --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Sample page&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
    Current url: ${context.url}
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>

<p>In rest view resources it could be accessed with a static lookup: <code>TemplateContext.getInstance()</code>.</p>
<p>This way you can always know current gsp application name, original url (before redirection to rest),
root application mapping prefix and get original request object (which may be required for error pages).</p>
<h3 id="index-page">Index page<a class="headerlink" href="#index-page" title="Permanent link">&para;</a></h3>
<p>Index page is a page shown for root application url (<code>/</code>). It could be declared as:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;com.project.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/com/app/ui/&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">indexPage</span><span class="p">(</span><span class="err">&#39;</span><span class="n">index</span><span class="p">.</span><span class="na">html</span><span class="err">&#39;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">build</span><span class="p">())</span>
</code></pre></div>

<p>It could be:
* Direct resource: <code>index.html</code>
* Direct template: <code>index.ftl</code>
* Rest powered template: <code>/mapping/</code> </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, index page is set to <code>""</code> because most likely your index page will be 
handled with rest and <code>""</code> will redirect to root path (for current application): <code>/com.project.ui/</code> </p>
</div>
<h3 id="error-pages">Error pages<a class="headerlink" href="#error-pages" title="Permanent link">&para;</a></h3>
<p>Each GSP application could declare its own error pages (very similar to servlet api). </p>
<p>It could be one global error page and different pages per status:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;com.project.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/com/app/ui/&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">errorPage</span><span class="p">(</span><span class="err">&#39;</span><span class="n">error</span><span class="p">.</span><span class="na">html</span><span class="err">&#39;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">errorPage</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="err">&#39;</span><span class="mf">500.</span><span class="n">html</span><span class="err">&#39;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">errorPage</span><span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="err">&#39;</span><span class="mf">401.</span><span class="n">html</span><span class="err">&#39;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">build</span><span class="p">())</span>
</code></pre></div>

<p>As with index pages, error page may be direct static html, direct template or rest path.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Error pages are shown ONLY if requested type was <code>text/html</code> and pass error as is 
in other cases. Simply because it is not correct to return html when client was expecting different type. </p>
</div>
<p>Errors handling logic detects:</p>
<ol>
<li>Static resources errors (404)</li>
<li>Exceptions during view resource processing (including rendering errors)</li>
<li>Direct error codes return without exception (<code>Resounce.status(404).build()</code>) </li>
</ol>
<p>Error pages may use special view class (or extend it) <code>ErrorTemplateView</code> which
collects additional error-related info.</p>
<p>For example, even direct error template could show:</p>
<div class="codehilite"><pre><span></span><code>&lt;#-- @ftlvariable name=&quot;&quot; type=&quot;ru.vyarus.guicey.gsp.views.template.ErrorTemplateView&quot; --&gt;

&lt;h3&gt;Url ${erroredUrl} failed to render with ${errorCode} status code&lt;/h3&gt;
&lt;div&gt;Error: ${error.class.simpleName}&lt;/div&gt;
&lt;pre&gt;
  ${errorTrace}
&lt;/pre&gt;
</code></pre></div>

<p>For rest-powered error page:</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/views/projectName/ui/error/&quot;</span><span class="p">)</span>
<span class="nd">@Template</span><span class="p">(</span><span class="s">&quot;error.ftl&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ErrorPage</span> <span class="p">{</span>

    <span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">TemplateView</span> <span class="nf">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// it may be any extending class if additional properties are required (the same as usual)</span>
        <span class="n">ErrorTemplateView</span> <span class="n">view</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ErrorTemplateView</span><span class="p">();</span>
        <span class="n">WebApplicationException</span> <span class="n">ex</span> <span class="o">=</span> <span class="n">view</span><span class="p">.</span><span class="na">getError</span><span class="p">();</span>
        <span class="c1">// analyze error</span>
        <span class="k">return</span> <span class="n">view</span><span class="p">;</span>
    <span class="p">}</span>        
<span class="p">}</span>
</code></pre></div>

<p>(this error page can be mapped as <code>.errorPage("/error/")</code>).</p>
<p><code>view.getError()</code> always return <code>WebApplicationException</code> so use <code>ex.geCause()</code> to get original exception.
But there will not always be useful exception because direct exception is only one of error cases (see above).</p>
<p>In order to differentiate useful exceptions, you can check:</p>
<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="p">(</span><span class="n">ex</span> <span class="k">instanceof</span> <span class="n">TracelessException</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// only status code availbale</span>
    <span class="kt">int</span> <span class="n">status</span> <span class="o">=</span> <span class="p">((</span><span class="n">TracelessException</span><span class="p">)</span> <span class="n">ex</span><span class="p">).</span><span class="na">getStatus</span><span class="p">();</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// actually throwed exception to analyze</span>
    <span class="n">Throwable</span> <span class="n">actualCause</span> <span class="o">=</span> <span class="n">ex</span><span class="p">.</span><span class="na">getCause</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>

<p><code>TracelessException</code> may be either <code>AssertError</code> for static resource fail or <code>TemplateRestCodeError</code>
for direct non 200 response code in rest.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>GSP errors handling override <a href="https://www.dropwizard.io/en/release-2.0.x/manual/views.html#template-errors">ExceptionMapper</a>
and <a href="https://www.dropwizard.io/en/release-2.0.x/manual/views.html#custom-error-pages">views errors</a>
mechanisms because it intercept exceptions before them (using <code>RequestEventListener</code>)! So your 
<code>ExceptionMapper</code> will be called, but user will still see GSP error page. </p>
</div>
<p>The motivation is simple: otherwise it would be very hard to write side effect free GSP applications
because template resources exceptions could be intercepted with <code>ExceptionMapper</code>'s declared
in dropwizard application.  </p>
<p>To overcome this limitation, you can disable errors handling with <code>@ManuaErrorHandling</code>.
It may be applied on resource method or to resource class (to disable on all methods).</p>
<p>For example:</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/com.project.ui/error/&quot;</span><span class="p">)</span>
<span class="nd">@Template</span><span class="p">(</span><span class="s">&quot;page.ftl&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ErrorPage</span> <span class="p">{</span>

    <span class="nd">@ManualErrorHandling</span>
    <span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">TemplateView</span> <span class="nf">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// if exception appear inside this method, it would be handled with ExceptionMapper</span>
        <span class="c1">// GSP error page will not be used</span>

        <span class="c1">// Also, if method return non 200 error code (&gt;=400) like </span>
        <span class="c1">// return Response.status(500).build()</span>
        <span class="c1">// it would be also not handled with GSP error mechanism (only pure dropwizard staff) </span>
    <span class="p">}</span>        
<span class="p">}</span>
</code></pre></div>

<div class="admonition note">
<p>Note that disabled errors will be indicated as <code>[DISABLED ERRORS]</code> in console report. </p>
</div>
<h3 id="spa-routing">SPA routing<a class="headerlink" href="#spa-routing" title="Permanent link">&para;</a></h3>
<p>If you use Single Page Applications then you may face the need to recognize html5 client routing urls
and redirect to index page. You can read more about it in <a href="../guicey-spa">guicey SPA module</a>.</p>
<p>As guicey SPA module can't be used directly with GSP, it's abilities is integrated directly and could 
be activated with:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="p">,</span> <span class="s">&quot;com.app.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">spaRouting</span><span class="p">()</span>
                    <span class="p">.</span><span class="na">build</span><span class="p">())</span>
</code></pre></div>

<p>Or, if custom detection regex is required: <code>.spaRouting(customRegex)</code></p>
<p>Most likely, usage use-case would be: index page requires some server-size templating.</p>
<h3 id="template-requests-detection">Template requests detection<a class="headerlink" href="#template-requests-detection" title="Permanent link">&para;</a></h3>
<p>GSP must differentiate static resource calls from template calls. It assumes that static
resources would always end with an extension (e.g. <code>/something/some.ext</code>) and so:</p>
<ol>
<li>If request without extension - it's a template</li>
<li>If extension is recognized as template extension - render as template</li>
<li>Other cases are static resources</li>
</ol>
<p>The following regular expression used for extension detection:
<div class="codehilite"><pre><span></span><code>(?:^|/)([^/]+\.(?:[a-zA-Z\d]+))(?:\?.+)?$
</code></pre></div></p>
<p>If it does not cover you specific cases, it could be changed using:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;com.project.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/com/app/ui/&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">filePattern</span><span class="p">(</span><span class="s">&quot;(?:^|/)([^/]+\\.(?:[a-zA-Z\\d]+))(?:\\?.+)?$&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">build</span><span class="p">())</span>
</code></pre></div>

<p>In case when you have static files without extension, you can include them directly 
into detection regexp (using regex or (|) syntax).</p>
<p>Pattern must return detected file name as first matched group (so direct template could be detected).
Pattern is searched (find) inside path, not matched (so simple patterns will also work).</p>
<h3 id="extending-applications">Extending applications<a class="headerlink" href="#extending-applications" title="Permanent link">&para;</a></h3>
<p>In "war world" there is a a very handy thing as overlays: when we can apply our resources
"above" existing war. This way we can replace existing files (hack &amp; tune) and add our own files
so they would live inside app as they were always be there.</p>
<p>In order to achieve similar goals there is a application extension mechanism. </p>
<p>For example we application:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="p">,</span> <span class="s">&quot;com.app.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">build</span><span class="p">())</span>
</code></pre></div>

<p>With multiple pages inside:</p>
<div class="codehilite"><pre><span></span><code>/com/app/ui/
    page1.ftl
    page2.ftl
    style.css
</code></pre></div>

<p>Each page could include style relatively as <code>style.css</code>. Most likely, there will even
be master template (freemarker) which unifies styles and common script installation.</p>
<p>This application is distributed as 3<sup>rd</sup> party bundle (jar). If we need to add one more page 
to this application in our current dropwizard application, we can:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">extendApp</span><span class="p">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">attachAssets</span><span class="p">(</span><span class="s">&quot;com.otherApp.ui.ext&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">build</span><span class="p">())</span>
</code></pre></div>

<p>And put another page into classpath:</p>
<div class="codehilite"><pre><span></span><code>/com/otherApp/ui/ext/
    page3.ftl    
</code></pre></div>

<p>This page could also reference <code>style.css</code> relatively, the same as pages in the main application.</p>
<p>On application startup, you will notice new resources location:</p>
<div class="codehilite"><pre><span></span><code>    Static resources locations:
        /com/app/ui/
        /com/otherApp/ui/ext/
</code></pre></div>

<p>Now both locations are "roots" for the application. The same way as if we copied
<code>/com/otherApp/ui/ext/</code> into <code>/com/app/ui/</code>.</p>
<p><code>http://localhost:8080/page3.ftl</code> would correctly render new page.</p>
<p>There may be unlimited number of application extensions. If extended application
is not available, it is not considered as an error: it's assumed as optional
application extension, which will be activated if some 3<sup>rd</sup> party jar with GSP application<br />
appear in classpath.</p>
<p>You can also map addition rest prefixes:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">extendApp</span><span class="p">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">mapViews</span><span class="p">(</span><span class="s">&quot;/sub/folder/&quot;</span><span class="p">,</span> <span class="s">&quot;/views/something/ext/&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">build</span><span class="p">())</span>
</code></pre></div>

<p>In some cases, extensions may depend on dropwizard configuration, but
bundles created under initialization phase. To workaround this you can 
use delayed extensions init:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">extendApp</span><span class="p">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">delayedConfiguration</span><span class="p">((</span><span class="n">env</span><span class="p">,</span> <span class="n">assets</span><span class="p">,</span> <span class="n">views</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">env</span><span class="p">.</span><span class="na">configuration</span><span class="p">().</span><span class="na">isExtensionsEnabled</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">assets</span><span class="p">.</span><span class="na">attach</span><span class="p">(</span><span class="s">&quot;com.foo.bar&quot;</span><span class="p">)</span>
            <span class="p">}</span>           
         <span class="p">})</span>
        <span class="p">.</span><span class="na">build</span><span class="p">())</span>
</code></pre></div>

<h3 id="webjars-usage">Webjars usage<a class="headerlink" href="#webjars-usage" title="Permanent link">&para;</a></h3>
<p>If you want to use resources from <a href="https://www.webjars.org/">webjars</a> in GSP application:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;com.project.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/com/app/ui/&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="na">attachWebjars</span><span class="p">()</span>
                    <span class="p">.</span><span class="na">build</span><span class="p">())</span>
</code></pre></div>

<p>For example, to add jquery:</p>
<div class="codehilite"><pre><span></span><code><span class="n">implementation</span> <span class="s1">&#39;org.webjars.npm:jquery:3.4.1&#39;</span>
</code></pre></div>

<p>And it could be referenced as:</p>
<div class="codehilite"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;jquery/3.4.1/dist/jquery.min.js&quot;</span><span class="p">/&gt;</span>
</code></pre></div>

<p>Under the hood <code>.attachWebjars()</code> use extensions mechanism and adds 
<code>META-INF/resources/webjars/</code> as application resources path:</p>
<div class="codehilite"><pre><span></span><code><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;com.project.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/com/app/ui/&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
    <span class="p">...</span>
    <span class="p">.</span><span class="na">attachAssets</span><span class="p">(</span><span class="s">&quot;META-INF/resources/webjars/&quot;</span><span class="p">)</span>
</code></pre></div>

<p>OR</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">extendApp</span><span class="p">(</span><span class="s">&quot;app name&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">attachAssets</span><span class="p">(</span><span class="s">&quot;META-INF/resources/webjars/&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">build</span><span class="p">())</span>
</code></pre></div>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can always see the content of webjar on <a href="https://www.webjars.org/">webjars site</a> by clicking
on package "Files" column. Use everything after "META-INF/resources/webjars/" to reference file.</p>
</div>
<h3 id="custom-classloaders">Custom classloaders<a class="headerlink" href="#custom-classloaders" title="Permanent link">&para;</a></h3>
<p><em>Very specific case</em></p>
<p>There is a limited support for custom classloaders. Assumed case is when application resources
could be loaded with different class loaders.</p>
<p>Custom classloader could be specified during application registration, for example:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">app</span><span class="p">(</span><span class="s">&quot;com.project.ui&quot;</span><span class="p">,</span> <span class="s">&quot;/com/app/ui/&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="n">classLoader</span><span class="p">)</span>                    
                    <span class="p">.</span><span class="na">build</span><span class="p">())</span>
</code></pre></div>

<p>The same for admin app and extension.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This will affect only static resources! Template engine will not be able to resolve
resources because it is not aware of custom loaders.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The main problem here is dropwizards <code>View</code> class which accepts only file path (String),
so even if correct URL object is known (which is enough to load resource) before view construction
it can't be used further.  </p>
<p>To workaround this, resolved absolute template path passed to view constructor. GSP module
is able to found correct resourse later in correct class loader, but it requires obvious changes
to template engine templates resolution mechanism.    </p>
</div>
<p>To resolve this, special templates resolver is required. For freemarker it is provided out of the box, 
but must be enabled on main bundle:</p>
<div class="codehilite"><pre><span></span><code><span class="n">ServerPagesBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
    <span class="p">.</span><span class="na">enableFreemarkerCustomClassLoadersSupport</span><span class="p">()</span>
    <span class="p">...</span>
</code></pre></div>

<p>For mustache module it is impossible to write such integration.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../spa/" title="SPA" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                SPA
              </span>
            </div>
          </a>
        
        
          <a href="../validation/" title="Validation" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Validation
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2014-2020 Vyacheslav Rusakov
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/xvik" target="_blank" rel="noopener" title="github" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/vyarus" target="_blank" rel="noopener" title="twitter" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:"../.."}})</script>
      
    
  </body>
</html>