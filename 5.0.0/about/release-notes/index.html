



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Dropwizard guice integration">
      
      
        <link rel="canonical" href="https://xvik.github.io/dropwizard-guicey/5.0.0/about/release-notes/">
      
      
        <meta name="author" content="Vyacheslav Rusakov">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.2">
    
    
      
        <title>Release notes - Dropwizard-guicey</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-93174150-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#500-release-notes" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://xvik.github.io/dropwizard-guicey/5.0.0" title="Dropwizard-guicey" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Dropwizard-guicey
            </span>
            <span class="md-header-nav__topic">
              
                Release notes
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/xvik/dropwizard-guicey/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    dropwizard-guicey
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../guide/configuration/" class="md-tabs__link">
          User guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../installers/resource/" class="md-tabs__link">
          Installers
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../extras/bom/" class="md-tabs__link">
          Modules
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../examples/authentication/" class="md-tabs__link">
          Examples
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="./" class="md-tabs__link md-tabs__link--active">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://xvik.github.io/dropwizard-guicey/5.0.0" title="Dropwizard-guicey" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Dropwizard-guicey
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/xvik/dropwizard-guicey/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    dropwizard-guicey
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../concepts/" title="Concepts overview" class="md-nav__link">
      Concepts overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../guice/" title="Guice" class="md-nav__link">
      Guice
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../tests/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../decomposition/" title="Decomposition" class="md-nav__link">
      Decomposition
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      User guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        User guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/extensions/" title="Extensions" class="md-nav__link">
      Extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/web/" title="Web" class="md-nav__link">
      Web
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/modules/" title="Extra integrations" class="md-nav__link">
      Extra integrations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/bundles/" title="Bundles" class="md-nav__link">
      Bundles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/yaml-values/" title="Yaml values" class="md-nav__link">
      Yaml values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-7" type="checkbox" id="nav-7-7">
    
    <label class="md-nav__link" for="nav-7-7">
      Guice
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-7">
        Guice
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/injector/" title="Injector" class="md-nav__link">
      Injector
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/bindings/" title="Bindings" class="md-nav__link">
      Bindings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/scopes/" title="Scopes" class="md-nav__link">
      Scopes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/module-autowiring/" title="Module autowiring" class="md-nav__link">
      Module autowiring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/module-analysis/" title="Modules analysis" class="md-nav__link">
      Modules analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/override/" title="Override bindings" class="md-nav__link">
      Override bindings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/guice/servletmodule/" title="ServletModule" class="md-nav__link">
      ServletModule
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-8" type="checkbox" id="nav-7-8">
    
    <label class="md-nav__link" for="nav-7-8">
      Diagnostic
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-8">
        Diagnostic
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/diagnostic-tools/" title="Tools" class="md-nav__link">
      Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/configuration-report/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/configuration-model/" title="Configuration model" class="md-nav__link">
      Configuration model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/installers-report/" title="Installers" class="md-nav__link">
      Installers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/yaml-values-report/" title="Yaml values" class="md-nav__link">
      Yaml values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/lifecycle-report/" title="Lifecycle" class="md-nav__link">
      Lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/guice-report/" title="Guice" class="md-nav__link">
      Guice
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/aop-report/" title="AOP" class="md-nav__link">
      AOP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/web-report/" title="Web" class="md-nav__link">
      Web
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/diagnostic/jersey-report/" title="Jersey" class="md-nav__link">
      Jersey
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/test/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/lifecycle/" title="Lifecycle" class="md-nav__link">
      Lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/scan/" title="Classpath scan" class="md-nav__link">
      Classpath scan
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/installers/" title="Installers" class="md-nav__link">
      Installers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/ordering/" title="Ordering" class="md-nav__link">
      Ordering
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/options/" title="Options" class="md-nav__link">
      Options
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/events/" title="Events" class="md-nav__link">
      Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/disables/" title="Disables" class="md-nav__link">
      Disables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/deduplication/" title="De-duplication" class="md-nav__link">
      De-duplication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/commands/" title="Commands" class="md-nav__link">
      Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/hooks/" title="Hooks" class="md-nav__link">
      Hooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/shared/" title="Shared state" class="md-nav__link">
      Shared state
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/hk2/" title="HK2" class="md-nav__link">
      HK2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Installers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Installers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/resource/" title="Resource" class="md-nav__link">
      Resource
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/task/" title="Task" class="md-nav__link">
      Task
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/managed/" title="Managed" class="md-nav__link">
      Managed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/lifecycle/" title="Lifecycle" class="md-nav__link">
      Lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/healthcheck/" title="Health check" class="md-nav__link">
      Health check
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/jersey-ext/" title="Jersey extension" class="md-nav__link">
      Jersey extension
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/jersey-feature/" title="Jersey feature" class="md-nav__link">
      Jersey feature
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/eager/" title="Eager singleton" class="md-nav__link">
      Eager singleton
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/plugin/" title="Plugin" class="md-nav__link">
      Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/servlet/" title="Web servlet" class="md-nav__link">
      Web servlet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/filter/" title="Web filter" class="md-nav__link">
      Web filter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/listener/" title="Web listener" class="md-nav__link">
      Web listener
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/bom/" title="BOM" class="md-nav__link">
      BOM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/admin-rest/" title="Admin REST" class="md-nav__link">
      Admin REST
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/lifecycle-annotations/" title="Lifecycle annotations" class="md-nav__link">
      Lifecycle annotations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/eventbus/" title="Guava EventBus" class="md-nav__link">
      Guava EventBus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/jdbi/" title="JDBI" class="md-nav__link">
      JDBI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/jdbi3/" title="JDBI3" class="md-nav__link">
      JDBI3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/spa/" title="SPA" class="md-nav__link">
      SPA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/gsp/" title="Server Pages" class="md-nav__link">
      Server Pages
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/authentication/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/governator/" title="Governator" class="md-nav__link">
      Governator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/hibernate/" title="Hibernate" class="md-nav__link">
      Hibernate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/eventbus/" title="EventBus" class="md-nav__link">
      EventBus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/jdbi/" title="JDBI" class="md-nav__link">
      JDBI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/jdbi3/" title="JDBI3" class="md-nav__link">
      JDBI3
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11" checked>
    
    <label class="md-nav__link" for="nav-11">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Release notes
      </label>
    
    <a href="./" title="Release notes" class="md-nav__link md-nav__link--active">
      Release notes
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-changes" class="md-nav__link">
    General changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-extensions" class="md-nav__link">
    Optional extensions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-guicey-lifecycle" class="md-nav__link">
    New guicey lifecycle
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-phase-shortcuts" class="md-nav__link">
    Run phase shortcuts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-bundles-and-modules-of-the-same-type-support" class="md-nav__link">
    Multiple bundles and modules of the same type support
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deduplication" class="md-nav__link">
    Deduplication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reporting" class="md-nav__link">
    Reporting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-model" class="md-nav__link">
    Configuration Model
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dropwizard-bundles-direct-support" class="md-nav__link">
    Dropwizard bundles direct support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-from-guice-bindings-jersey1-guice-style" class="md-nav__link">
    Configuration from guice bindings (jersey1-guice style)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#guice-reports" class="md-nav__link">
    Guice reports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bindinginstaller" class="md-nav__link">
    BindingInstaller
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#injector-lookup" class="md-nav__link">
    Injector lookup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guicey-listeners-changes" class="md-nav__link">
    Guicey listeners changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-shared-configuration-state" class="md-nav__link">
    New shared configuration state
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reporting-changes" class="md-nav__link">
    Reporting changes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#web-report" class="md-nav__link">
    Web report
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jersey-report" class="md-nav__link">
    Jersey report
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guicey-hooks-changes" class="md-nav__link">
    Guicey hooks changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-classloaders-support" class="md-nav__link">
    Multiple classloaders support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guicey-bom-includes-guicey-itself" class="md-nav__link">
    Guicey BOM includes guicey itself
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#java-11-compatibility" class="md-nav__link">
    Java 11 compatibility
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extension-modules" class="md-nav__link">
    Extension modules
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spa" class="md-nav__link">
    SPA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bom" class="md-nav__link">
    BOM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gsp" class="md-nav__link">
    GSP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jdbi2" class="md-nav__link">
    JDBI2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixes-issues" class="md-nav__link">
    Fixes issues
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-guide" class="md-nav__link">
    Migration guide
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dropwizard-related" class="md-nav__link">
    Dropwizard related
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guiceybundle" class="md-nav__link">
    GuiceyBundle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-instances-registration-bundles-modules" class="md-nav__link">
    Multiple instances registration (bundles, modules)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guice-bindings-analysis" class="md-nav__link">
    Guice bindings analysis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-hooks" class="md-nav__link">
    Test hooks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-options" class="md-nav__link">
    Removed options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reporting_1" class="md-nav__link">
    Reporting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension-modules_1" class="md-nav__link">
    Extension modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installers" class="md-nav__link">
    Installers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../compatibility/" title="Compatibility" class="md-nav__link">
      Compatibility
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../history/" title="Version history" class="md-nav__link">
      Version history
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-changes" class="md-nav__link">
    General changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-extensions" class="md-nav__link">
    Optional extensions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-guicey-lifecycle" class="md-nav__link">
    New guicey lifecycle
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-phase-shortcuts" class="md-nav__link">
    Run phase shortcuts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-bundles-and-modules-of-the-same-type-support" class="md-nav__link">
    Multiple bundles and modules of the same type support
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deduplication" class="md-nav__link">
    Deduplication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reporting" class="md-nav__link">
    Reporting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-model" class="md-nav__link">
    Configuration Model
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dropwizard-bundles-direct-support" class="md-nav__link">
    Dropwizard bundles direct support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-from-guice-bindings-jersey1-guice-style" class="md-nav__link">
    Configuration from guice bindings (jersey1-guice style)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#guice-reports" class="md-nav__link">
    Guice reports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bindinginstaller" class="md-nav__link">
    BindingInstaller
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#injector-lookup" class="md-nav__link">
    Injector lookup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guicey-listeners-changes" class="md-nav__link">
    Guicey listeners changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-shared-configuration-state" class="md-nav__link">
    New shared configuration state
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reporting-changes" class="md-nav__link">
    Reporting changes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#web-report" class="md-nav__link">
    Web report
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jersey-report" class="md-nav__link">
    Jersey report
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guicey-hooks-changes" class="md-nav__link">
    Guicey hooks changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-classloaders-support" class="md-nav__link">
    Multiple classloaders support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guicey-bom-includes-guicey-itself" class="md-nav__link">
    Guicey BOM includes guicey itself
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#java-11-compatibility" class="md-nav__link">
    Java 11 compatibility
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extension-modules" class="md-nav__link">
    Extension modules
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spa" class="md-nav__link">
    SPA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bom" class="md-nav__link">
    BOM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gsp" class="md-nav__link">
    GSP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jdbi2" class="md-nav__link">
    JDBI2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixes-issues" class="md-nav__link">
    Fixes issues
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-guide" class="md-nav__link">
    Migration guide
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dropwizard-related" class="md-nav__link">
    Dropwizard related
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guiceybundle" class="md-nav__link">
    GuiceyBundle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-instances-registration-bundles-modules" class="md-nav__link">
    Multiple instances registration (bundles, modules)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guice-bindings-analysis" class="md-nav__link">
    Guice bindings analysis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-hooks" class="md-nav__link">
    Test hooks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-options" class="md-nav__link">
    Removed options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reporting_1" class="md-nav__link">
    Reporting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension-modules_1" class="md-nav__link">
    Extension modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installers" class="md-nav__link">
    Installers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/xvik/dropwizard-guicey/edit/master/src/doc/docs/about/release-notes.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="500-release-notes">5.0.0 Release Notes<a class="headerlink" href="#500-release-notes" title="Permanent link">&para;</a></h1>
<p>Release contains many breaking changes due to:</p>
<ul>
<li>Dropwizard 2.0 (Jersey 2.26) breaking changes</li>
<li>Change of guicey lifecycle</li>
</ul>
<p>As dropwizard 2.0 already introduce many breaking changes (new jersey actually), so it was an ideal moment to fix 
all conceptual guicey mistakes. </p>
<p>Please read <a href="https://www.dropwizard.io/en/release-2.0.x/manual/upgrade-notes/upgrade-notes-2_0_x.html">dropwizard 2.0 upgrade guide</a> first.</p>
<ul>
<li><a href="#general-changes">General changes</a></li>
<li><a href="#optional-extensions">Optional extensions</a></li>
<li><a href="#new-guicey-lifecycle">New guicey lifecycle</a></li>
<li><a href="#multiple-bundles-and-modules-of-the-same-type-support">Multiple bundles and modules of the same type support</a></li>
<li><a href="#dropwizard-bundles-direct-support">Dropwizard bundles direct support</a></li>
<li><a href="#configuration-from-guice-bindings-jersey1-guice-style">Configuration from guice bindings (jersey1-guice style)</a></li>
<li><a href="#injector-lookup">Injector lookup improvements</a></li>
<li><a href="#multiple-classloaders-support">Multiple classloaders support</a></li>
<li><a href="#guicey-listeners-changes">Guicey listeners changes</a></li>
<li><a href="#new-shared-lifecycle-state">New shared configuration state</a></li>
<li><a href="#reporting-changes">Reporting changes</a></li>
<li><a href="#guicey-hooks-changes">Guicey hooks changes</a></li>
<li><a href="#guicey-bom-includes-guicey-itself">Guicey BOM includes guicey itself</a></li>
<li><a href="#java-11-compatibility">Java 11 compatibility</a></li>
<li><a href="#extension-modules">Extension modules</a></li>
<li><a href="#fixes-issues">Fixed issues</a></li>
</ul>
<p><strong><a href="#migration-guide">Migration Guide</a></strong>.</p>
<h2 id="general-changes">General changes<a class="headerlink" href="#general-changes" title="Permanent link">&para;</a></h2>
<p>Jersey 2.26 introduces an abstraction for injection layer in order to get rid of hk2 direct usage.
Right now all direct hk2 classes must be replaced by jersey abstractions (see <a href="#dropwizard-related">migration matrix</a> below)</p>
<p>Note that <code>org.glassfish.hk2.api.ServiceLocator</code> must be replaced with <code>org.glassfish.jersey.internal.inject.InjectionManager</code>.
The later may be used to obtain locator, but be aware that HK2 supposed to be completely dropped in the next guicey version.</p>
<p><code>@HK2Managed</code> guicey annotation was renamed to <code>@JerseyManaged</code> to point on possible absence of HK2.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In the next version guicey will get rid of HK2 and so all HK2-related methods and options <em>were marked as deprecated</em>.
There is no alternatives now for deprecated methods so you can continue using them if required.
Deprecation simply indicates what will be removed in the future version.</p>
</div>
<p>Useless configuration generic was removed from main bundle: <code class="codehilite"><span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span></code> must be used 
instead of <code class="codehilite"><span class="n">GuiceBundle</span><span class="o">.&lt;</span><span class="n">MyConfg</span><span class="o">&gt;</span><span class="n">builder</span><span class="o">()</span></code></p>
<p><code>GuiceBundle.builder()#useWebInstallers()</code> was removed because <code>WebInstallersBundle</code> is 
activated by default and so you don't need to activate it manually anymore. </p>
<p><code>AdminRestBundle</code> was moved from guicey to <a href="../../extras/admin-rest/">external module</a>.
It is now a guicey bundle. Admin-only resources returns 404 instead of 403 on user context.</p>
<h2 id="optional-extensions">Optional extensions<a class="headerlink" href="#optional-extensions" title="Permanent link">&para;</a></h2>
<p>When extension is declared directly in bundle:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">extensions</span><span class="o">(</span><span class="n">SimeExtension</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>

<p>And no intaller recognized such extension then startup will fail.</p>
<p>Now extensions can be registered as:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">extensionsOptional</span><span class="o">(</span><span class="n">SimeExtension</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>

<p>For optional extension, if installer not found it automatically become disabled.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is no need to mark extensions as optional for classpath scan or bindigns analysis
because guiey will simply not detect extension if requried installer is not available</p>
</div>
<h2 id="new-guicey-lifecycle">New guicey lifecycle<a class="headerlink" href="#new-guicey-lifecycle" title="Permanent link">&para;</a></h2>
<p>Before guicey perform all it's operations under dropwizard run phase. This makes guicey and dropwizard
bundles interoperability hard. But guicey should not limit dropwizard abilities and so now
almost all configuration is performed under dropwizard's configuration phase.</p>
<p><a href="../../guide/lifecycle/">New guicey lifecycle</a>:</p>
<ul>
<li>Dropwizard bundles are resolved and initialized under configuration phase</li>
<li>Classpath scan and extensions resolution appears under configuration phase</li>
<li>Guice injector, as before, created under run phase.</li>
</ul>
<p><code>GuiceyBundle</code> interface changed from </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GuiceyBundle</span> <span class="o">{</span>
    <span class="c1">// called on run phase</span>
    <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">GuiceyBootstrap</span> <span class="n">bootstrap</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<p>into </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GuiceyBundle</span> <span class="o">{</span>
    <span class="c1">// called on configuration phase</span>
    <span class="k">default</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">GuiceyBootstrap</span> <span class="n">bootstrap</span><span class="o">)</span> <span class="o">{}</span>
    <span class="c1">// called on run phase</span>
    <span class="k">default</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="n">GuiceyEnvironment</span> <span class="n">environment</span><span class="o">)</span> <span class="o">{}</span>
<span class="o">}</span>
</pre></div>

<p>Default methods were used by analogy with updated dropwizard <code>ConfiguredBundle</code> to avoid need to always
implement both methods.                      </p>
<p>All registrations, except modules must be performed under configuration phase. On run phase only guice modules could be
registered because guice modules often require configuration values (without this it would always
require to use root <code>DropwizardAwareModule</code> to perform some modules registrations).</p>
<p>Extensions might be disabled in run phase: assumed that this could be required for
<a href="../../guide/bundles/#optional-extensions">optional features</a>, driven by configuration (not needed extensions could be disabled, based on 
configuration object values).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dropwizard and guicey bundles are completely equivalent now, but guicey bundles provide more 
configuration options (aware of guicey). So prefer using <code>GuiceyBundle</code> instead of dropwizard bundles. 
Note that guicey bundles now provide shortcut methods for easy dropwizard bundles registration.</p>
</div>
<p>Before, extensions registration was performed under guice injector creation, but now it was moved 
just <a href="../../guide/lifecycle/#run-phase">after injector creation</a> in order to differentiate pure injector creation errors from
extension installation errors.  </p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Statistics report (<a href="../../guide/diagnostic/configuration-report/">.printDiagnosticInfo()</a>) will also print time by phase:
<div class="codehilite"><pre><span></span>GUICEY started in 441.1 ms (104.8 ms config / 336.2 ms run / 0 jersey)
</pre></div>
(configuration phase / run phase / extensions installation during jersey startup)</p>
</div>
<h3 id="run-phase-shortcuts">Run phase shortcuts<a class="headerlink" href="#run-phase-shortcuts" title="Permanent link">&para;</a></h3>
<p><code>GuiceyEnvironment</code> don't allow guicey items registrations (except modules), but 
provide many shortcuts:</p>
<ul>
<li><code>register()</code> for <code>environment().jersey().register()</code></li>
<li><code>manage()</code> for <code>environment().lifecycle().manage()</code> </li>
<li><code>listenJetty()</code> for <code>environment().lifecycle().addLifeCycleListener()</code> </li>
<li><code>listenServer()</code> for <code>environment().lifecycle().addServerLifecycleListener()</code></li>
<li><code>onGuiceyStartup()</code> - special callback called after guicey start to perform manual registrations in 
    dropwizard environment with provided injector</li>
<li><code>onApplicationStartup()</code> - special callback called after complete application startup (in guicey lightweight tests too)
    (with provided injector)     </li>
</ul>
<h2 id="multiple-bundles-and-modules-of-the-same-type-support">Multiple bundles and modules of the same type support<a class="headerlink" href="#multiple-bundles-and-modules-of-the-same-type-support" title="Permanent link">&para;</a></h2>
<p>Before, guicey was always tracking configuration items by class and so when you register multiple bundles or modules
or the same type, only one was accepted: </p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">modules</span><span class="o">(</span><span class="k">new</span> <span class="n">MyModule1</span><span class="o">(),</span> <span class="k">new</span> <span class="n">MyModule2</span><span class="o">())</span>
</pre></div>

<p>But often it is required to register multiple modules/bundles with different parametrization:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">modules</span><span class="o">(</span><span class="k">new</span> <span class="n">ParametrizableModule</span><span class="o">(</span><span class="s">&quot;mod1&quot;</span><span class="o">),</span> <span class="k">new</span> <span class="n">ParametrizableModule</span><span class="o">(</span><span class="s">&quot;mod2&quot;</span><span class="o">))</span>
</pre></div>

<p>Now guicey <strong>allows multiple instances</strong> of the same type. So, in examples above, both modules
would be registered and used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Multiple instances support is more logical in context of dropwizard, because dropwizard itself 
allows registration of multiple bundles of the same type.</p>
</div>
<h3 id="deduplication">Deduplication<a class="headerlink" href="#deduplication" title="Permanent link">&para;</a></h3>
<p>In some cases, previous limitation was actually desired for deduplication: before, when two or more bundles use some
common bundle, they could safely register it and be sure that only one common bundle instance would be used.
Now, <strong>both</strong> common bundles would be registered.</p>
<p>To workaround such cases <a href="../../guide/deduplication/">deduplication mechanism</a> was introduced: instances of the same
type are considered duplicate if they are equal. So, in order to resolve "common bundle problem"
bundle must only properly implement equals method, like this:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CommonBundle</span> <span class="kd">implements</span> <span class="n">GuiceyBundle</span> <span class="o">{</span>
    <span class="o">...</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="kd">final</span> <span class="n">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">obj</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">getClass</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">obj</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Guicey provide base classes for such cases:
<code>UniqueGuiceyBundle</code> for unique bundles and <code>UniqueModule</code> (<code>UniqueDropwizardAwareModule</code>) for unique guice modules</p>
</div>
<p>But, it may be impossible to implement correct equals method for some 3<sup>rd</sup> party bundle or module used.
In this case unique objects may be marked with:</p>
<div class="codehilite"><pre><span></span><span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">uniqueItems</span><span class="o">(</span><span class="n">Some3rdPartyBundle</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> 
                 <span class="n">Some3rdPartyModule</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>

<p>For complex cases (e.g. when only some kinds of objects must be unique), manual deduplication 
implementation may be registered:</p>
<div class="codehilite"><pre><span></span><span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">...</span>
    <span class="o">.</span><span class="na">duplicateConfigDetector</span><span class="o">((</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">registered</span><span class="o">,</span> <span class="n">Object</span> <span class="n">newItem</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
         <span class="k">if</span> <span class="o">(</span><span class="n">newItem</span> <span class="n">isntanceof</span> <span class="n">Some3rdPartyBundle</span><span class="o">)</span> <span class="o">{</span>
             <span class="c1">// decide if item collide with provided registered instances (of the same type)</span>
             <span class="k">return</span> <span class="n">detectedDuplicate</span> <span class="c1">// instance that registered is duplicate to or null to accept item</span>
         <span class="o">}</span>           
         <span class="c1">// allow instance registration</span>
         <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>    
    <span class="o">})</span>
</pre></div>

<p>Detector is called after equals check, so you may be sure that newItem is not equal to 
any of already registered instances (detector extends default deduplication mechanism, not replaces).      </p>
<p>Old <em>"1 instance per class"</em> behaviour could be recovered with bundled detector:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">duplicateConfigDetector</span><span class="o">(</span><span class="k">new</span> <span class="n">LegacyModeDuplicatesDetector</span><span class="o">())</span>
</pre></div>

<h3 id="reporting">Reporting<a class="headerlink" href="#reporting" title="Permanent link">&para;</a></h3>
<p>Configuration diagnostic report (<a href="../../guide/diagnostic/configuration-report/">.printDiagnosticInfo()</a>) was improved to 
show all registered instances and ignored duplicates.</p>
<p>For example, if we have module declared to be unique by constructor value:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VMod</span> <span class="kd">extends</span> <span class="n">AbstractModule</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">value</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">VMod</span><span class="o">(</span><span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">obj</span> <span class="k">instanceof</span> <span class="n">VMod</span> <span class="o">&amp;&amp;</span> <span class="n">value</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">obj</span><span class="o">.</span><span class="na">value</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>   
</pre></div>

<p>If modules are registered like this:</p>
<div class="codehilite"><pre><span></span> <span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">modules</span><span class="o">(</span><span class="k">new</span> <span class="n">VMod</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="n">VMod</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="n">VMod</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="n">VMod</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span>
    <span class="o">.</span><span class="na">printDiagnosticInfo</span><span class="o">()</span>
    <span class="o">.</span><span class="na">build</span><span class="o">()</span>
</pre></div>

<p>Report would contain:</p>
<div class="codehilite"><pre><span></span>GUICE MODULES =
        VMod                          (com.mycompany) *REG(2/4) 

APPLICATION
    ├── module     VMod                          (com.mycompany)
    ├── module     -VMod                         (com.mycompany) *DUPLICATE
    ├── module     VMod#2                        (com.mycompany)
    ├── module     -VMod#2                       (com.mycompany) *DUPLICATE
</pre></div>

<p>Where you can see that 2 of 4 registered modules of type VMod were registered.
Note that instances are numbered (#2) in order of registration (without duplicates) 
so you can always see what bundle were considered as original (and registration order when
bundles of the same type are registered in different bundles). </p>
<h3 id="configuration-model">Configuration Model<a class="headerlink" href="#configuration-model" title="Permanent link">&para;</a></h3>
<p>As before, guicey configuration info (used for it's reports) is available through
<code>@Inject GuiceyConfigurationInfo info</code> bean. But in new version it is not class centric:
instead new <code>ItemId</code> <a href="../../guide/diagnostic/configuration-model/#identity">class used</a>.</p>
<p><code>ItemId</code> compose item type with real object hash in order to differentiate different instances of type.</p>
<div class="codehilite"><pre><span></span><span class="c1">// equal classes</span>
<span class="n">ItemId</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">MyType</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="n">ItemId</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">MyType</span><span class="o">.</span><span class="na">class</span><span class="o">))</span>
<span class="c1">// but not equal instances </span>
<span class="o">!</span><span class="n">ItemId</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">instance1</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="n">ItemId</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">instance2</span><span class="o">))</span>  
</pre></div>

<p>But, to simplify checks, instance id is always equal to type id:</p>
<div class="codehilite"><pre><span></span><span class="n">ItemId</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">myTypeInstance</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="n">ItemId</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">MyType</span><span class="o">.</span><span class="na">class</span><span class="o">))</span>  
</pre></div>

<p>ItemId's now also used for scopes differentiation (because multiple bundles of the same type could be registered
and class is not enough anymore to differentiate scopes). </p>
<p>Some api methods still return lists of classes (for cases when duplicates are not important).</p>
<h2 id="dropwizard-bundles-direct-support">Dropwizard bundles direct support<a class="headerlink" href="#dropwizard-bundles-direct-support" title="Permanent link">&para;</a></h2>
<p>Dropwizard bundles now could be registered directly with main guice bundle:</p>
<div class="codehilite"><pre><span></span> <span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">dropwizardBundles</span><span class="o">(</span><span class="k">new</span> <span class="n">MyDropwizardBundle</span><span class="o">())</span>
</pre></div>

<p>And from guicey bundle:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">GuiceyBootstrap</span> <span class="n">bootstrap</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">bootstrap</span><span class="o">.</span><span class="na">dropwizardBundles</span><span class="o">(</span><span class="k">new</span> <span class="n">MyDropwizardBundle</span><span class="o">())</span>
<span class="o">}</span>
</pre></div>

<p>Benefits of registration through guicey api:</p>
<ul>
<li>Bundle could be <a href="../../guide/disables/#disable-dropwizard-bundles">disabled</a> </li>
<li>Bundle appear in <a href="../../guide/diagnostic/configuration-report/">diagnostic reports</a></li>
<li>Deduplication mechanism <a href="../../guide/deduplication/#dropwizard-bundles">applied to registered bundles</a></li>
</ul>
<p>And that's not all: guicey will also track <a href="../../guide/bundles/#transitive-bundles-tracking">transitive dropwizard bundles</a>
(bundles, installed by registered bundles). That means you can see (in report) 
and control entire application configuration.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only bundles registered with guicey api are tracked. If you don't want some bundle to be tracked
register it in dropwizard boostrap object directly (even within guicey bundle bootstrap is available)</p>
</div>
<p>This could be useful for <a href="../../guide/deduplication/">deduplication</a>. For example, you have some common
dropwizard bundle and two other bundles, registering this common bindle. Normally,
you can't use both bundles, because dropwizard will try to install both common bundles.
But guicey will deduplicate them. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Transitive dropwizard bundles are tracked by proxying bootstrap object, passed into bundles (not global!).</p>
</div>
<p>Transitive dropwizard bundles detection could be disabled with option:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="n">GuieyOptions</span><span class="o">.</span><span class="na">TrackDropwizardBundles</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span>
</pre></div>

<p>In this case only root bundles registered through guicey api would be visible for guicey
and so deduplication and disabling will affect only them.    </p>
<h2 id="configuration-from-guice-bindings-jersey1-guice-style">Configuration from guice bindings (jersey1-guice style)<a class="headerlink" href="#configuration-from-guice-bindings-jersey1-guice-style" title="Permanent link">&para;</a></h2>
<p>Guicey now can recognize extensions <a href="../../guide/guice/module-analysis/#extensions-recognition">from guice bindings</a> 
in configured guice modules. For example,</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyModule</span> <span class="kd">extends</span> <span class="n">AbstractModule</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span> <span class="o">()</span> <span class="o">{</span>
        <span class="c1">// right parts just for example </span>
        <span class="n">bind</span><span class="o">(</span><span class="n">MyResource</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="n">MyResourceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">bind</span><span class="o">(</span><span class="n">MyManaged</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">toProvider</span><span class="o">(</span><span class="n">MyManagedProvider</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>Guicey will detect <code>MyResource</code> as jersey resource and <code>MyManaged</code> as managed extension.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>As with <a href="../../guide/scan/">classpath scan</a>, <code>@InvisibleForScanner</code> annotation may be
used to prevent binding recognition.</p>
</div>
<p>This is completely equivalent to</p>
<div class="codehilite"><pre><span></span><span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">extensions</span><span class="o">(</span><span class="n">MyResource</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">MyManaged</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Internally, the same installers are used for extensions recognition and installation.
The only difference is that guicey would not create <a href="../../guide/guice/bindings/#extension-bindings">default bindings</a> for such extensions
(because bindings already exists).</p>
</div>
<p>See <a href="../../guide/guice/module-analysis/#restrictions">available restrictions</a>.</p>
<p>Extensions from guice bindings could be also disabled:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">disableExtensions</span><span class="o">(</span><span class="n">MyResource</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>

<p>This is possible because guicey use guice SPI to parse configured bindings (before injector creation)
and could exclude some bindings before injector startup. If extenions is part of a chain, 
<a href="../../guide/guice/module-analysis/#removed-bindings">chain is also removed</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To avoid duplicate work by injector (to parse user modules again), guicey prepares synthetic
module with pre-processed bindings (and pass it to injector instead of raw modules).</p>
</div>
<p>Also, guicey is able to track <a href="../../guide/guice/module-analysis/#transitive-modules">transitive modules</a> (modules installed by registered modules)
and exclude disabled modules.      </p>
<p>For example, </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyModule</span> <span class="kd">extends</span> <span class="n">AbstractModule</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">install</span><span class="o">(</span><span class="k">new</span> <span class="n">OtherMyModule</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>  

<span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">modules</span><span class="o">(</span><span class="k">new</span> <span class="n">MyModule</span><span class="o">())</span>
    <span class="o">.</span><span class="na">disableModules</span><span class="o">(</span><span class="n">OtherMyModule</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>

<p>Will correctly exclude transitive module (including all later transitive modules).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a href="../../guide/deduplication/">Deduplication rules</a> will not work with transitive modules: guicey can only detect
complete guice modules tree, but not intercept module instance registration.
Anyway, be aware that <strong>guice itself support deduplication</strong>: only one of equal modules
will be actually installed.   </p>
</div>
<p>Guice modules analysis could be disabled with option:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="n">GuiceyOptions</span><span class="o">.</span><span class="na">AnalyzeModules</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span>
</pre></div>

<p>In this case, guicey will work exactly as before: it would only see root modules, configured
by user and extensions will not be detected from bindings. </p>
<h3 id="guice-reports">Guice reports<a class="headerlink" href="#guice-reports" title="Permanent link">&para;</a></h3>
<p>Guice bindings will be shown on diagnostic report <a href="../../guide/diagnostic/configuration-report/">.printDiagnosticInfo()</a></p>
<div class="codehilite"><pre><span></span>├── GUICE BINDINGS
    │   │
    │   └── BindModule                   (com.mycompany)
    │       └── extension  Ext                          (com.mycompany.ext)
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Guice bindings are shown as sub tree because only target extension module class is known
whereas multiple modules with the same type could be registered.
Extensions are show relative to the top guice module registered by user
(because this report just shows "configuration sources")        </p>
</div>
<p>New guice bindings report <a href="../../guide/diagnostic/guice-report/">.printGuiceBindings()</a>:</p>
<div class="codehilite"><pre><span></span> 1 MODULES with 3 bindings
    │
    └── CasesModule                  (r.v.d.g.d.r.g.support)
        ├── &lt;typelistener&gt;                        CustomTypeListener                              at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.CasesModule.configure(CasesModule.java:19)
        ├── &lt;provisionlistener&gt;                   CustomProvisionListener                         at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.CasesModule.configure(CasesModule.java:26)
        ├── &lt;aop&gt;                                 CustomAop                                       at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.CasesModule.configure(CasesModule.java:33)
        ├── untargetted          [@Singleton]     AopedService                                    at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.CasesModule.configure(CasesModule.java:36) *AOP
        ├── linkedkey            [@Prototype]     BindService                                     at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.CasesModule.configure(CasesModule.java:37) *OVERRIDDEN
        └── instance             [@Singleton]     BindService2                                    at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.CasesModule.configure(CasesModule.java:38) *OVERRIDDEN


    1 OVERRIDING MODULES with 2 bindings
    │
    └── OverrideModule               (r.v.d.g.d.r.g.support)
        ├── linkedkey            [@Prototype]     BindService                                     at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.OverrideModule.configure(OverrideModule.java:16) *OVERRIDE
        └── instance             [@Singleton]     BindService2                                    at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.OverrideModule.configure(OverrideModule.java:17) *OVERRIDE


    1 UNDECLARED bindings
    └── JitService                   (r.v.d.g.d.r.g.s.exts)


    BINDING CHAINS
    └── BindService  --[linked]--&gt;  OverrideService
</pre></div>

<p>Shows all bindings in user modules (without <a href="../../guide/guice/override/">overriding modules</a>)</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><a href="../../guide/diagnostic/guice-report/">.printAllGuiceBindings()</a> shows also guicey's own bindings and guice internal bindings.
It may be useful to see everything guicey configures. </p>
</div>
<p>And new guice aop map report <a href="../../guide/diagnostic/aop-report/">.printGuiceAopMap()</a>:</p>
<div class="codehilite"><pre><span></span>    2 AOP handlers declared
    ├── AopModule/Interceptor1                                                    at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.AopModule.configure(AopModule.java:23)
    └── AopModule/Interceptor2                                                    at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.AopModule.configure(AopModule.java:24)


    1 bindings affected by AOP
    │
    └── Service    (r.v.d.g.d.r.g.s.AopModule)
        ├── something()                                                       Interceptor1
        └── somethingElse(List)                                               Interceptor1
</pre></div>

<p>Shows all declared guice aop handlers and how they apply to beans (including order).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This report is intended to be used as a tool to look some exact beans and methods with
<code>.printGuiceAopMap(new GuiceAopConfig().types(...).methods(...))</code></p>
</div>
<h3 id="bindinginstaller">BindingInstaller<a class="headerlink" href="#bindinginstaller" title="Permanent link">&para;</a></h3>
<p>Interface of <code>BindingInstaller</code> was changed from </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">BindingInstaller</span> <span class="o">{</span>    
    <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">bind</span><span class="o">(</span><span class="n">Binder</span> <span class="n">binder</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">type</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<p>into </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">BindingInstaller</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">bind</span><span class="o">(</span><span class="n">Binder</span> <span class="n">binder</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">type</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">lazy</span><span class="o">);</span>
    <span class="k">default</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">manualBinding</span><span class="o">(</span><span class="n">Binder</span> <span class="n">binder</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">type</span><span class="o">,</span> <span class="n">Binding</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">binding</span><span class="o">){}</span> 
    <span class="k">default</span> <span class="kt">void</span> <span class="nf">extensionBound</span><span class="o">(</span><span class="n">Stage</span> <span class="n">stage</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">type</span><span class="o">){}</span>
<span class="o">}</span>
</pre></div>

<p>Where </p>
<p><div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">bind</span><span class="o">(</span><span class="n">Binder</span> <span class="n">binder</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">type</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">lazy</span><span class="o">);</span>
</pre></div>
will be called for classpath scan and directly registered extensions, </p>
<div class="codehilite"><pre><span></span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">manualBinding</span><span class="o">(</span><span class="n">Binder</span> <span class="n">binder</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">type</span><span class="o">,</span> <span class="n">Binding</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">binding</span><span class="o">);</span>
</pre></div>

<p>for detected guice bindings and </p>
<div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">extensionBound</span><span class="o">(</span><span class="n">Stage</span> <span class="n">stage</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">type</span><span class="o">);</span>
</pre></div>

<p>in both cases to apply reporting (after bind or manual binding check)</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Binding installers may now be called multiple times in case if guice reports will be activated.
If required, actual run could be differentiated from report by current stage <code>currentStage() == Stage.TOOL</code>.</p>
</div>
<h2 id="injector-lookup">Injector lookup<a class="headerlink" href="#injector-lookup" title="Permanent link">&para;</a></h2>
<p>Injector now could be statically referenced with dropwizard <code>Environment</code> object:</p>
<div class="codehilite"><pre><span></span><span class="n">InjectorLookup</span><span class="o">.</span><span class="na">getInjector</span><span class="o">(</span><span class="n">environment</span><span class="o">)</span>
</pre></div>

<p>Also, direct bean reference added:</p>
<div class="codehilite"><pre><span></span><span class="n">MyService</span> <span class="n">service</span> <span class="o">=</span> <span class="n">InjectorLookup</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">application</span><span class="o">,</span> <span class="n">MyService</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">get</span><span class="o">()</span>
</pre></div>

<p>And with environment:</p>
<div class="codehilite"><pre><span></span><span class="n">MyService</span> <span class="n">service</span> <span class="o">=</span> <span class="n">InjectorLookup</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">environment</span><span class="o">,</span> <span class="n">MyService</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">get</span><span class="o">()</span>
</pre></div>

<h2 id="guicey-listeners-changes">Guicey listeners changes<a class="headerlink" href="#guicey-listeners-changes" title="Permanent link">&para;</a></h2>
<p>Deduplication applied for registered listeners (through <code>.listen()</code>). It is not the same
mechanism as applied for extensions. Listeners are registered now in <code>LinkedHashSet</code> and so
listeners properly implementing equals and hashcode would be automatically ignored.</p>
<p>Listeners deduplication is useful for reporting: as now all guicey reports <a href="../../guide/diagnostic/diagnostic-tools/#reports-implementation">implemented 
with listeners</a> and they correctly implement equals and hashcode so if user by accident
register multiple reports they would be printed just once.</p>
<p>Supported events were changed (due to lifecycle changes). More information 
(configuration objects) added to events. </p>
<p>One special event added <code>ApplicationStarted</code> which is always called after dropwizard startup 
(including jersey start). It would be fired even in tests when <code>GuiceyAppRule</code> used 
(which does not start jersey). Supposed to be used to simplify diagnostic reporting.</p>
<p>Listeners are no longer checked to be <a href="../../guide/hooks/">hooks</a> (for automatic hook registration). This was
very confusing feature. Now when hooks are more "open", custom hook should register listener
and not opposite.</p>
<h2 id="new-shared-configuration-state">New shared configuration state<a class="headerlink" href="#new-shared-configuration-state" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This <a href="../../guide/shared/">feature</a> is intended to be used for very special cases only. It was added to 
remove current and future hacks for implementing global application state or bundles communication
and avoid testing side effects. </p>
</div>
<p>Sometimes, it is required to share some "global" state between multiple bundles. In this cases
developer have to introduce static or TreadLocal hacks in order to share required state.
This usually leads to problems in tests where application instances may run concurrently.</p>
<p>Guicey provides now universal shared state mechanism. It is supposed to be used mainly by bundles.
For example, case with one main bundle (which register global scope) and other bundles, appending info into it:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainBundle</span> <span class="kd">implements</span> <span class="n">GuiceyBundle</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">GuiceyBootstrap</span> <span class="n">bootstrap</span><span class="o">)</span> <span class="o">{</span>                   
        <span class="c1">// make GlobalConfig instance available for other bundles</span>
        <span class="n">bootstrap</span><span class="o">.</span><span class="na">shareState</span><span class="o">(</span><span class="n">MainBundle</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">new</span> <span class="n">GlobalConfig</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>                                                                

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RelativeBundle</span> <span class="kd">implements</span> <span class="n">GuiceyBundle</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="n">publicvoid</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">GuiceyBootstrap</span> <span class="n">bootstrap</span><span class="o">)</span> <span class="o">{</span>                   
        <span class="c1">// access global state</span>
        <span class="n">GlobalConfig</span> <span class="n">config</span> <span class="o">=</span> <span class="n">bootstrap</span><span class="o">.</span><span class="na">sharedStateOrFail</span><span class="o">(</span><span class="n">MainBundle</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> 
                <span class="s">&quot;No global config found, register main bundle&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>Another example, when equal bundles need to share some context:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SomeBundle</span> <span class="kd">implements</span> <span class="n">GuiceyBundle</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">GuiceyBootstrap</span> <span class="n">bootstrap</span><span class="o">)</span> <span class="o">{</span>                   
        <span class="c1">// either get shared config or register new one (first accessed bundle init state) </span>
        <span class="n">SharedConfig</span> <span class="n">config</span> <span class="o">=</span> <span class="n">bootstrap</span>
                <span class="o">.</span><span class="na">sharedState</span><span class="o">(</span><span class="n">SomeBundle</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">SharedConfig</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>Restrictions:</p>
<ul>
<li>State is accessed by class only to avoid dummy key mistakes. It is advised to use bundle name for key.</li>
<li>State can be set only once to avoid hard to track re-assignments. Null not allowed.</li>
<li>GuiceyBundle provide state assignment methods only in initialization phase. It is advised to 
    assign values only there to be sure value is available in run phase (avoid errors caused by registration order) </li>
</ul>
<p>Shared state could be accessed statically anywhere with application instance:</p>
<div class="codehilite"><pre><span></span><span class="n">GlobalConfig</span> <span class="n">config</span> <span class="o">=</span> <span class="n">SharedConfigurationState</span>
        <span class="o">.</span><span class="na">lookupOrFail</span><span class="o">(</span><span class="n">application</span><span class="o">,</span> <span class="n">GlobalBundle</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&quot;Bundle not registered&quot;</span><span class="o">);</span>
</pre></div>

<p>Guicey hooks could also access shared state with callback:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">XHook</span> <span class="kd">implements</span> <span class="n">GuiceyConfigurationHook</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">GuiceBundle</span><span class="o">.</span><span class="na">Builder</span> <span class="n">builder</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">builder</span><span class="o">.</span><span class="na">withSharedState</span><span class="o">({</span>
                <span class="n">it</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">XHook</span><span class="o">,</span> <span class="s">&quot;12&quot;</span><span class="o">)</span>
            <span class="o">});</span>
        <span class="o">}</span>
    <span class="o">}</span>
</pre></div>

<p>But this is only useful for special states initialization (because bundles are not
executed yet). </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Guicey itself use this state for Injector storage and in extended bundles (
<a href="../../extras/gsp/">gsp</a>, <a href="../../extras/spa/">spa</a>). </p>
</div>
<p>By default, shared state contains references for <code>Bootstrap</code>, <code>Environment</code>, <code>Configuration</code> and <code>ConfigurationTree</code> objects
just in case if they'll need to be accessed statically:</p>
<div class="codehilite"><pre><span></span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Bootstrap</span><span class="o">&gt;</span> <span class="n">bootstrap</span> <span class="o">=</span> <span class="n">SharedConfigurationState</span><span class="o">.</span><span class="na">lookup</span><span class="o">(</span><span class="n">environment</span><span class="o">,</span> <span class="n">Bootstrap</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</pre></div>

<h2 id="reporting-changes">Reporting changes<a class="headerlink" href="#reporting-changes" title="Permanent link">&para;</a></h2>
<p>All guicey <a href="../../guide/diagnostic/diagnostic-tools/">reports</a> were moved into top-level package "debug". All reports are
guicey listeners now. </p>
<p>Listeners <a href="../../guide/events/#de-duplication">deduplication</a> mechanism used to ignore duplicate reports activation:
e.g. duplicate <code>.printDiagnosticInfo()</code> call will not cause duplicate report render.</p>
<p>Diagnostic report (<a href="../../guide/diagnostic/configuration-report/">.printDiagnosticInfo()</a>) is now logged as single log message
and not each sub report as separate log.</p>
<p>Statistics sub report now includes guice startup logs (previously required to be activated separately):</p>
<div class="codehilite"><pre><span></span>    ├── [54%] INJECTOR created in 236.6 ms
    │   ├── Module execution: 143 ms
    │   ├── Interceptors creation: 1 ms
    │   ├── TypeListeners &amp; ProvisionListener creation: 2 ms
    │   ├── Scopes creation: 1 ms
    │   ├── Binding creation: 22 ms
    │   ├── Private environment creation: 1 ms
    │   ├── Binding initialization: 35 ms
    │   ├── Binding indexing: 1 ms
    │   ├── Collecting injection requests: 2 ms
    │   ├── Static validation: 4 ms
    │   ├── Instance member validation: 3 ms
    │   ├── Provider verification: 1 ms
    │   ├── Static member injection: 10 ms
    │   ├── Instance injection: 2 ms
    │   └── Preloading singletons: 6 ms
</pre></div>

<p><a href="../../guide/diagnostic/installers-report/">.printAvailableInstallers()</a> report shows installer markers by implemented interfaces (like <code>TypeInstaller</code>, 
<code>BindingInstaller</code>, etc.):</p>
<div class="codehilite"><pre><span></span>INSTALLERS in processing order = 
        OBJECT, ORDER                  lifecycle            (r.v.d.g.m.i.f.LifeCycleInstaller)     
        OBJECT, ORDER                  managed              (r.v.d.g.m.i.feature.ManagedInstaller) 
        OBJECT                         jerseyfeature        (r.v.d.g.m.i.f.j.JerseyFeatureInstaller) 
        JERSEY, BIND, OPTIONS          jerseyprovider       (r.v.d.g.m.i.f.j.p.JerseyProviderInstaller) 
        TYPE, JERSEY, BIND, OPTIONS    resource             (r.v.d.g.m.i.f.j.ResourceInstaller)    
        BIND                           eagersingleton       (r.v.d.g.m.i.f.e.EagerSingletonInstaller) 
        OBJECT                         healthcheck          (r.v.d.g.m.i.f.h.HealthCheckInstaller) 
        OBJECT                         task                 (r.v.d.g.m.i.feature.TaskInstaller)    
        BIND                           plugin               (r.v.d.g.m.i.f.plugin.PluginInstaller) 
        OBJECT, OPTIONS, ORDER         webservlet           (r.v.d.g.m.i.f.w.WebServletInstaller)  
        OBJECT, ORDER                  webfilter            (r.v.d.g.m.i.f.web.WebFilterInstaller) 
        OBJECT, OPTIONS, ORDER         weblistener          (r.v.d.g.m.i.f.w.l.WebListenerInstaller) 
</pre></div>

<p>If you were using <code>DiagnosticBundle</code> directly it is now <code>ConfigurationDiagnostic</code> listener.
<code>DebugGuiceyLifecycle</code> was renamed to <code>LifecycleDiagnostic</code></p>
<h3 id="web-report">Web report<a class="headerlink" href="#web-report" title="Permanent link">&para;</a></h3>
<p>New <a href="../../guide/diagnostic/web-report/">web report</a> was added to show all registered servlets and filters for both contexts.
Report also shows servlets and filters from guice <code>ServletModule</code>:</p>
<div class="codehilite"><pre><span></span>    <span class="n">MAIN</span> <span class="o">/</span>
    <span class="err">├──</span> <span class="n">filter</span>     <span class="o">/</span><span class="n">custom</span><span class="o">/*</span>                    <span class="n">CustomMappingFilter</span>          <span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">v</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">g</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">r</span><span class="o">.</span><span class="na">w</span><span class="o">.</span><span class="na">s</span><span class="o">.</span><span class="na">UserServletsBundle</span><span class="o">)</span>                    <span class="o">[</span><span class="n">ERROR</span><span class="o">]</span>         <span class="o">.</span><span class="na">custommapping</span>
    <span class="err">├──</span> <span class="n">filter</span>     <span class="o">/</span><span class="n">async</span><span class="o">/*</span>             <span class="n">async</span>   <span class="nf">AsyncFilter</span>                  <span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">v</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">g</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">r</span><span class="o">.</span><span class="na">w</span><span class="o">.</span><span class="na">s</span><span class="o">.</span><span class="na">UserServletsBundle</span><span class="o">)</span>                    <span class="o">[</span><span class="n">REQUEST</span><span class="o">]</span>       <span class="o">.</span><span class="na">async</span>
    <span class="err">├──</span> <span class="n">filter</span>     <span class="o">/</span><span class="n">both</span><span class="o">/*</span>                      <span class="n">BothFilter</span>                   <span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">v</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">g</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">r</span><span class="o">.</span><span class="na">w</span><span class="o">.</span><span class="na">s</span><span class="o">.</span><span class="na">UserServletsBundle</span><span class="o">)</span>                    <span class="o">[</span><span class="n">REQUEST</span><span class="o">]</span>       <span class="o">.</span><span class="na">both</span>
    <span class="err">├──</span> <span class="n">filter</span>     <span class="o">/</span><span class="mi">1</span><span class="o">/*</span>                         <span class="n">MainFilter</span>                   <span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">v</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">g</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">r</span><span class="o">.</span><span class="na">w</span><span class="o">.</span><span class="na">s</span><span class="o">.</span><span class="na">UserServletsBundle</span><span class="o">)</span>                    <span class="o">[</span><span class="n">REQUEST</span><span class="o">]</span>       <span class="o">.</span><span class="na">main</span>
    <span class="err">├──</span> <span class="n">filter</span>     <span class="o">/</span><span class="mi">2</span><span class="o">/*</span>                         <span class="o">--</span><span class="err">&quot;</span><span class="o">--</span>                                                                                                
    <span class="err">│</span>   
    <span class="err">├──</span> <span class="n">filter</span>     <span class="o">/*</span>                   <span class="n">async</span>   <span class="nf">GuiceFilter</span>                  <span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">g</span><span class="o">.</span><span class="na">inject</span><span class="o">.</span><span class="na">servlet</span><span class="o">)</span>                                    <span class="o">[</span><span class="n">REQUEST</span><span class="o">]</span>       <span class="n">Guice</span> <span class="n">Filter</span>
    <span class="err">│</span>   <span class="err">├──</span> <span class="n">guicefilter</span>     <span class="o">/</span><span class="mi">1</span><span class="o">/*</span>                         <span class="n">GFilter</span>                        <span class="n">r</span><span class="o">.</span><span class="na">v</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">g</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">r</span><span class="o">.</span><span class="na">w</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">GuiceWebModule</span>
    <span class="err">│</span>   <span class="err">├──</span> <span class="n">guicefilter</span>     <span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">abc</span><span class="o">?/.*</span>           <span class="n">regex</span>   <span class="n">GRegexFilter</span>                   <span class="n">r</span><span class="o">.</span><span class="na">v</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">g</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">r</span><span class="o">.</span><span class="na">w</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">GuiceWebModule</span>
    <span class="err">│</span>   <span class="err">├──</span> <span class="n">guicefilter</span>     <span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">foo</span>                       <span class="n">instance</span> <span class="n">of</span> <span class="n">GFilterInstance</span>    <span class="n">r</span><span class="o">.</span><span class="na">v</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">g</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">r</span><span class="o">.</span><span class="na">w</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">GuiceWebModule</span>
    <span class="err">│</span>   <span class="err">├──</span> <span class="n">guiceservlet</span>    <span class="o">/</span><span class="mi">2</span><span class="o">/*</span>                         <span class="n">GServlet</span>                       <span class="n">r</span><span class="o">.</span><span class="na">v</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">g</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">r</span><span class="o">.</span><span class="na">w</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">GuiceWebModule</span>
    <span class="err">│</span>   <span class="err">├──</span> <span class="n">guiceservlet</span>    <span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="n">abc</span><span class="o">?/</span>             <span class="n">regex</span>   <span class="n">GRegexServlet</span>                  <span class="n">r</span><span class="o">.</span><span class="na">v</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">g</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">r</span><span class="o">.</span><span class="na">w</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">GuiceWebModule</span>
    <span class="err">│</span>   <span class="err">└──</span> <span class="n">guiceservlet</span>    <span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="n">foo</span>                       <span class="n">instance</span> <span class="n">of</span> <span class="n">GServletInstance</span>   <span class="n">r</span><span class="o">.</span><span class="na">v</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">g</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">r</span><span class="o">.</span><span class="na">w</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">GuiceWebModule</span>
    <span class="err">│</span>   
    <span class="err">├──</span> <span class="n">filter</span>     <span class="o">/*</span>                   <span class="n">async</span>   <span class="nf">AllowedMethodsFilter</span>         <span class="o">(</span><span class="n">i</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">jersey</span><span class="o">.</span><span class="na">filter</span><span class="o">)</span>                                     <span class="o">[</span><span class="n">REQUEST</span><span class="o">]</span>       <span class="n">io</span><span class="o">.</span><span class="na">dropwizard</span><span class="o">.</span><span class="na">jersey</span><span class="o">.</span><span class="na">filter</span><span class="o">.</span><span class="na">AllowedMethodsFilter</span><span class="o">-</span><span class="mf">5d</span><span class="mi">51</span><span class="n">e129</span>
    <span class="err">├──</span> <span class="n">filter</span>     <span class="o">/*</span>                   <span class="n">async</span>   <span class="nf">ThreadNameFilter</span>             <span class="o">(</span><span class="n">i</span><span class="o">.</span><span class="na">d</span><span class="o">.</span><span class="na">servlets</span><span class="o">)</span>                                          <span class="o">[</span><span class="n">REQUEST</span><span class="o">]</span>       <span class="n">io</span><span class="o">.</span><span class="na">dropwizard</span><span class="o">.</span><span class="na">servlets</span><span class="o">.</span><span class="na">ThreadNameFilter</span><span class="o">-</span><span class="mi">21</span><span class="n">c815e4</span>
    <span class="o">...</span>
</pre></div>

<h3 id="jersey-report">Jersey report<a class="headerlink" href="#jersey-report" title="Permanent link">&para;</a></h3>
<p>New <a href="../../guide/diagnostic/jersey-report/">jersey report</a> was added to show all jersey extensions
(including registered by dropwizard and registered manually):</p>
<div class="codehilite"><pre><span></span>    ...

    Message body readers
        Object                         BasicTypesMessageProvider    (o.g.j.m.internal)                       [text/plain]
        byte[]                         ByteArrayProvider            (o.g.j.m.internal)                       [application/octet-stream, */*]
        DataSource                     DataSourceProvider           (o.g.j.m.internal)                       [application/octet-stream, */*]
        Document                       DocumentProvider             (o.g.j.jaxb.internal)                    [application/xml, text/xml, */*]
        File                           FileProvider                 (o.g.j.m.internal)                       [application/octet-stream, */*]
        MultivaluedMap&lt;String, String&gt; FormMultivaluedMapProvider   (o.g.j.m.internal)                       [application/x-www-form-urlencoded]
        Form                           FormProvider                 (o.g.j.m.internal)                       [application/x-www-form-urlencoded, */*]
        Type                           GuiceMessageBodyReader       (r.v.d.g.c.h.support)                    
        Type                           HKMessageBodyReader          (r.v.d.g.c.h.s.hk)         *jersey managed 
        InputStream                    InputStreamProvider          (o.g.j.m.internal)                       [application/octet-stream, */*]
        Object                         JacksonJsonProvider          (c.f.j.jaxrs.json)                       [*/*]
        Object                         JacksonMessageBodyProvider   (i.d.jersey.jackson)                     [*/*]
        Reader                         ReaderProvider               (o.g.j.m.internal)                       [text/plain, */*]
        RenderedImage                  RenderedImageProvider        (o.g.j.m.internal)                       [image/*, application/octet-stream]
        StreamSource                   StreamSourceReader           (o.g.j.m.i.SourceProvider)               [application/xml, text/xml, */*]
        SAXSource                      SaxSourceReader              (o.g.j.m.i.SourceProvider)               [application/xml, text/xml, */*]
        DOMSource                      DomSourceReader              (o.g.j.m.i.SourceProvider)               [application/xml, text/xml, */*]
        String                         StringMessageProvider        (o.g.j.m.internal)                       [text/plain, */*]
        T[], Collection&lt;T&gt;             App                          (o.g.j.j.i.XmlCollectionJaxbProvider)    [application/xml]
        T[], Collection&lt;T&gt;             Text                         (o.g.j.j.i.XmlCollectionJaxbProvider)    [text/xml]
        T[], Collection&lt;T&gt;             General                      (o.g.j.j.i.XmlCollectionJaxbProvider)    [*/*]
        JAXBElement&lt;Object&gt;            App                          (o.g.j.j.i.XmlJaxbElementProvider)       [application/xml]
        JAXBElement&lt;Object&gt;            Text                         (o.g.j.j.i.XmlJaxbElementProvider)       [text/xml]
        JAXBElement&lt;Object&gt;            General                      (o.g.j.j.i.XmlJaxbElementProvider)       [*/*,*/*+xml]
        Object                         App                          (o.g.j.j.i.XmlRootElementJaxbProvider)   [application/xml]
        Object                         Text                         (o.g.j.j.i.XmlRootElementJaxbProvider)   [text/xml]
        Object                         General                      (o.g.j.j.i.XmlRootElementJaxbProvider)   [*/*]
        Object                         App                          (o.g.j.j.i.XmlRootObjectJaxbProvider)    [application/xml]
        Object                         Text                         (o.g.j.j.i.XmlRootObjectJaxbProvider)    [text/xml]
        Object                         General                      (o.g.j.j.i.XmlRootObjectJaxbProvider)    [*/*]

    ...
</pre></div>

<h2 id="guicey-hooks-changes">Guicey hooks changes<a class="headerlink" href="#guicey-hooks-changes" title="Permanent link">&para;</a></h2>
<p>Guicey lifecycle <a href="../../guide/hooks/">hooks</a> initially were supposed to be used for testing only. Now they
supposed to be also used for pluggable diagnostic tools (bundled, but not active). 
It could be additional tracing, instrumentation etc. </p>
<p>Hooks supposed to be activated through system property:</p>
<div class="codehilite"><pre><span></span>-Dguicey.hooks=com.mycompany.MyHook1,com.mycompany.MyHook2
</pre></div>

<p>Hook aliases were introduced to simplify activation:</p>
<div class="codehilite"><pre><span></span><span class="n">GuiceBindle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">hookAlias</span><span class="o">(</span><span class="s">&quot;alias1&quot;</span><span class="o">,</span> <span class="n">MyHook1</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>    
</pre></div>

<p>After alias registration, hook(s) could be enabled with alias name instead of full class name:</p>
<div class="codehilite"><pre><span></span>-Dguicey.hooks=alias1
</pre></div>

<p>Also, to make available tools more obvious, all registered aliases are logged at startup:</p>
<div class="codehilite"><pre><span></span>INFO  [2019-09-16 16:26:35,229] ru.vyarus.dropwizard.guice.hook.ConfigurationHooksSupport: Available hook aliases [ -Dguicey.hooks=alias ]: 

    alias1                    com.mycompany.MyHook1
</pre></div>

<p>By default, guicey provide <code>DiagnosticHook</code> which activates guicey's diagnostic reports:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DiagnosticHook</span> <span class="kd">implements</span> <span class="n">GuiceyConfigurationHook</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="kd">final</span> <span class="n">GuiceBundle</span><span class="o">.</span><span class="na">Builder</span> <span class="n">builder</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">builder</span><span class="o">.</span><span class="na">printDiagnosticInfo</span><span class="o">()</span>
                <span class="o">.</span><span class="na">printLifecyclePhasesDetailed</span><span class="o">()</span>
                <span class="o">.</span><span class="na">printCustomConfigurationBindings</span><span class="o">()</span>
                <span class="o">.</span><span class="na">printGuiceBindings</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>It is registered with <code>diagnostic</code> alias and so diagnostic reports may be easily enabled even
for compiled application with:</p>
<div class="codehilite"><pre><span></span>-Dguicey.hooks=diagnostic
</pre></div>

<h2 id="multiple-classloaders-support">Multiple classloaders support<a class="headerlink" href="#multiple-classloaders-support" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p>This is very special case, not appearing in usual dropwizard usage.</p>
</div>
<p>Before, guicey configuration was based on classes, but if same class come from
different classloaders, it would be detected as different extensions.</p>
<p>Now guicey would use class name for extension duplicates detection. </p>
<p>The same for instances (modules, bundles): custom duplicates detector implementation (<code>.duplicateConfigDetector()</code>) will receive 
objects for test, even if object classes were loaded by different classloaders.</p>
<p><code>UniqueGuiceyBundle</code> and <code>UniqueModule</code> classes equals and hashcode implementation
also check class names to correctly detect different classloaders case. </p>
<div class="admonition note">
<p>Bundled reporting listeners still work on class level. Anyway custom listener
could always implement equals and hashcode correctly honoring different classloaders case.     </p>
</div>
<h2 id="guicey-bom-includes-guicey-itself">Guicey BOM includes guicey itself<a class="headerlink" href="#guicey-bom-includes-guicey-itself" title="Permanent link">&para;</a></h2>
<p>Before, when guicey pom was used as bom, it was always required to put guicey version:</p>
<div class="codehilite"><pre><span></span><span class="n">dependencyManagement</span> <span class="o">{</span>
    <span class="n">imports</span><span class="o">.</span><span class="na">mavenBom</span> <span class="s1">&#39;ru.vyarus:dropwizard-guicey:4.2.2&#39;</span> 
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s1">&#39;ru.vyarus:dropwizard-guicey:4.2.2&#39;</span>
<span class="o">}</span>
</pre></div>

<p>Now guicey itself is included and only one version declaration required:</p>
<div class="codehilite"><pre><span></span><span class="n">dependencyManagement</span> <span class="o">{</span>
    <span class="n">imports</span><span class="o">.</span><span class="na">mavenBom</span> <span class="s1">&#39;ru.vyarus:dropwizard-guicey:5.0.0&#39;</span> 
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s1">&#39;ru.vyarus:dropwizard-guicey&#39;</span>
<span class="o">}</span>
</pre></div>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Dropwizard bom was split into <code>dropwizard-bom</code> and <code>dropwizard-dependencies</code> so in order
to override dropwizard version you will need to provide two dependencies:
<div class="codehilite"><pre><span></span><span class="n">dependencyManagement</span> <span class="o">{</span>
    <span class="n">imports</span> <span class="o">{</span>
        <span class="n">mavenBom</span> <span class="s1">&#39;ru.vyarus:dropwizard-guicey:5.0.0&#39;</span> 
        <span class="c1">// override dropwizard version </span>
        <span class="n">mavenBom</span> <span class="s1">&#39;io.dropwizard:dropwizard-bom:2.0.1&#39;</span>
        <span class="n">mavenBom</span> <span class="s1">&#39;io.dropwizard:dropwizard-dependencies:2.0.1&#39;</span> 
    <span class="o">}</span>
<span class="o">}</span>
</pre></div></p>
</div>
<h2 id="java-11-compatibility">Java 11 compatibility<a class="headerlink" href="#java-11-compatibility" title="Permanent link">&para;</a></h2>
<p>Guicey (and extensions) is binary compatible with java 11. 
Declared <code>Automatic-Module-Name</code>: <code>dropwizard-guicey.core</code> (META-INF).</p>
<p>Still, guicey releases will be build with java 8, but CI tools will detect any future incompatibilities.</p>
<h2 id="extension-modules">Extension modules<a class="headerlink" href="#extension-modules" title="Permanent link">&para;</a></h2>
<p>Extension <a href="../../guide/modules/">modules</a> version now aligned with guicey version: guiceyVersion-Number. For example,
<code>5.0.0-0</code> will be the first extensions release for guicey 5.0.0. </p>
<p>All extension bundles are guicey bundles now (thanks to lifecycles unification): <code>SpaBundle</code>, <code>ServerPagesBundle</code> (and relative bundles).</p>
<h3 id="spa">SPA<a class="headerlink" href="#spa" title="Permanent link">&para;</a></h3>
<p>Package notation may be used for more readable package declaration:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">bundles</span><span class="o">(</span><span class="n">SpaBundle</span><span class="o">.</span><span class="na">adminApp</span><span class="o">(</span><span class="s">&quot;admin&quot;</span><span class="o">,</span> <span class="s">&quot;com.mycompany.adminapp&quot;</span><span class="o">,</span> <span class="s">&quot;/manager&quot;</span><span class="o">).</span><span class="na">build</span><span class="o">());</span>
</pre></div>

<h3 id="bom">BOM<a class="headerlink" href="#bom" title="Permanent link">&para;</a></h3>
<p><code>H2</code> and <code>dropwizard-flyway</code> versions were added to <a href="../../extras/bom/">bom</a>. </p>
<h3 id="gsp">GSP<a class="headerlink" href="#gsp" title="Permanent link">&para;</a></h3>
<p>To simplify declaration, it is now possible to use package notation to declare resources:</p>
<div class="codehilite"><pre><span></span><span class="n">ServerPagesBundle</span><span class="o">.</span><span class="na">app</span><span class="o">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="o">,</span> <span class="s">&quot;com.app.ui&quot;</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">)</span>
</pre></div>

<p>But old path-style declaration will also work:</p>
<div class="codehilite"><pre><span></span><span class="n">ServerPagesBundle</span><span class="o">.</span><span class="na">app</span><span class="o">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="o">,</span> <span class="s">&quot;/com/app/ui/&quot;</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">)</span>
</pre></div>

<p>View rest mapping now can be declared:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">bundles</span><span class="o">(</span><span class="n">ServerPagesBundle</span><span class="o">.</span><span class="na">app</span><span class="o">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="o">,</span> <span class="s">&quot;com.app.ui&quot;</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">mapViews</span><span class="o">(</span><span class="s">&quot;/view/projectName/ui/&quot;</span><span class="o">)</span>
</pre></div>

<p>If mapping not declared then application name will be used as prefix: <code>/projectName-ui</code> (legacy behaviour)</p>
<p>Additional view rest could be also mapped to sub url:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">bundles</span><span class="o">(</span><span class="n">ServerPagesBundle</span><span class="o">.</span><span class="na">app</span><span class="o">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="o">,</span> <span class="s">&quot;com.app.ui&quot;</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">mapViews</span><span class="o">(</span><span class="s">&quot;/sub/path/&quot;</span><span class="o">,</span> <span class="s">&quot;/view/projectOther/ui/&quot;</span><span class="o">)</span>
</pre></div>

<p>Additional assets locations could be declared directly:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">bundles</span><span class="o">(</span><span class="n">ServerPagesBundle</span><span class="o">.</span><span class="na">app</span><span class="o">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="o">,</span> <span class="s">&quot;com.app.ui&quot;</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">attachAssets</span><span class="o">(</span><span class="s">&quot;some.other.package&quot;</span><span class="o">)</span>
</pre></div>

<p>Assets may also be declared to sub url:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">bundles</span><span class="o">(</span><span class="n">ServerPagesBundle</span><span class="o">.</span><span class="na">app</span><span class="o">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="o">,</span> <span class="s">&quot;com.app.ui&quot;</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">attachAssets</span><span class="o">(</span><span class="s">&quot;/sub/path/&quot;</span><span class="o">,</span> <span class="s">&quot;some.other.package&quot;</span><span class="o">)</span>
</pre></div>

<p><a href="../../extras/gsp/">ServerPagesBundle</a> lifecycle is more predictable now as all configuration appear under initialization phase
and only limited to guicey bundles.</p>
<p>Extension call now also return bundle, which may be used to configure both extra assets and view mappings:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">bundles</span><span class="o">(</span><span class="n">ServerPagesBundle</span><span class="o">.</span><span class="na">extendApp</span><span class="o">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">attachAssets</span><span class="o">(</span><span class="s">&quot;com.otherApp.ui.ext&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">mapViews</span><span class="o">(</span><span class="s">&quot;/sub/path/&quot;</span><span class="o">,</span> <span class="s">&quot;/view/projectOther/ui/&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">())</span>
</pre></div>

<p>Also extension bundle allow delayed configuration under run phase:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">bundles</span><span class="o">(</span><span class="n">ServerPagesBundle</span><span class="o">.</span><span class="na">extendApp</span><span class="o">(</span><span class="s">&quot;projectName-ui&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">delayedConfiguration</span><span class="o">((</span><span class="n">env</span><span class="o">,</span> <span class="n">assets</span><span class="o">,</span> <span class="n">views</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">env</span><span class="o">.</span><span class="na">configuration</span><span class="o">().</span><span class="na">isExtensionsEnabled</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">assets</span><span class="o">.</span><span class="na">attach</span><span class="o">(</span><span class="s">&quot;com.foo.bar&quot;</span><span class="o">)</span>
            <span class="o">}</span>           
         <span class="o">})</span>
        <span class="o">.</span><span class="na">build</span><span class="o">())</span>
</pre></div>

<p>This might be important if configuration object is required for correct configuration.</p>
<p>Console reporting for GSP application was improved to show all configured mappings (including sub paths).</p>
<p>Removed dynamic rest assignment for direct templates support, now instead of it special ExceptionMapper is used
(which removes many problems, appeared with rest approach).</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>New recommendation to put all viwe related rest under <code>/view/..</code> prefix to make it
clearly distiguish from application rest.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Just in case if anyone was using <code>PathUtils</code>, they were moved to guicey core with better test coverage and improved api.</p>
</div>
<h3 id="jdbi2">JDBI2<a class="headerlink" href="#jdbi2" title="Permanent link">&para;</a></h3>
<p><a href="../../extras/jdbi/">JDBI 2</a> module is deprecated because dropwizard deprecated it'd jdbi bundle and moved to <a href="https://github.com/dropwizard/dropwizard-jdbi">separate repository</a> </p>
<h2 id="fixes-issues">Fixes issues<a class="headerlink" href="#fixes-issues" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/xvik/dropwizard-guicey/issues/60">#60</a> Fix configuration bindings for recursive configuration object declarations</li>
</ul>
<h2 id="migration-guide">Migration guide<a class="headerlink" href="#migration-guide" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In dropwizard 2.0 <code>@Context</code> fields injection <a href="https://github.com/dropwizard/dropwizard/issues/2781">will not work for instances</a>.
As guicey register instances, you may be affected. Use <code>Provider&lt;Something&gt;</code> instead or rely
on <code>@Context</code> injection for method parameters which is working.  </p>
</div>
<p>Generic in main bundle:</p>
<div class="codehilite"><pre><span></span><span class="n">bootstrap</span><span class="o">,</span><span class="n">addBundle</span><span class="o">(</span><span class="n">GuiceBundle</span><span class="o">.&lt;</span><span class="n">CustomConfiguration</span><span class="o">&gt;</span><span class="n">builder</span><span class="o">()</span>
            <span class="o">...</span>
            <span class="o">.</span><span class="na">build</span><span class="o">())</span>   
</pre></div>

<p>Must be simply removed:
<div class="codehilite"><pre><span></span><span class="n">bootstrap</span><span class="o">,</span><span class="n">addBundle</span><span class="o">(</span><span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
</pre></div></p>
<h3 id="dropwizard-related">Dropwizard related<a class="headerlink" href="#dropwizard-related" title="Permanent link">&para;</a></h3>
<p>Jersey abstracted DI code and so most of it's api classes changed. 
Dropwizard deprecate <code>Bundle</code> interface.</p>
<p>Migration matrix:</p>
<table>
<thead>
<tr>
<th>Old class</th>
<th>New class</th>
</tr>
</thead>
<tbody>
<tr>
<td>org.glassfish.hk2.utilities.binding.AbstractBinder</td>
<td>org.glassfish.jersey.internal.inject.AbstractBinder</td>
</tr>
<tr>
<td>org.glassfish.hk2.utilities.Binder</td>
<td>org.glassfish.jersey.internal.inject.Binder</td>
</tr>
<tr>
<td>org.glassfish.hk2.api.Factory</td>
<td>java.util.function.Supplier</td>
</tr>
<tr>
<td>Factory used for Auth (user provider)</td>
<td>java.util.function.Function<ContainerRequest, ?></td>
</tr>
<tr>
<td>org.glassfish.jersey.server.internal.process.AsyncContext</td>
<td>org.glassfish.jersey.server.AsyncContext</td>
</tr>
<tr>
<td>org.glassfish.jersey.server.internal.inject.AbstractValueFactoryProvider</td>
<td>org.glassfish.jersey.server.internal.inject.AbstractValueParamProvider</td>
</tr>
<tr>
<td>org.glassfish.jersey.server.spi.internal.ValueFactoryProvider</td>
<td>org.glassfish.jersey.server.spi.internal.ValueParamProvider</td>
</tr>
<tr>
<td>org.glassfish.hk2.api.InjectionResolver</td>
<td>org.glassfish.jersey.internal.inject.InjectionResolver</td>
</tr>
<tr>
<td>io.dropwizard.Bundle</td>
<td>io.dropwizard.ConfiguredBundle (note that interface methods are default now and may not be implemented)</td>
</tr>
<tr>
<td>io.dropwizard.util.Size</td>
<td>io.dropwizard.util.DataSize</td>
</tr>
<tr>
<td>org.glassfish.hk2.api.ServiceLocator</td>
<td>org.glassfish.jersey.internal.inject.InjectionManager</td>
</tr>
<tr>
<td>ru.vyarus.dropwizard.guice.module.installer.feature.jersey.HK2Managed</td>
<td>ru.vyarus.dropwizard.guice.module.installer.feature.jersey.JerseyManaged</td>
</tr>
</tbody>
</table>
<h3 id="guiceybundle">GuiceyBundle<a class="headerlink" href="#guiceybundle" title="Permanent link">&para;</a></h3>
<p>As most of guicey initialization was moved into configuration dropwizard phase,
you will have to change all <code>GuiceyBundle</code>'s.</p>
<p>It now contains 2 methods (in accordance with dropwizard phases):</p>
<ul>
<li><code>void initialize(GuiceyBootstrap bootstrap)</code></li>
<li><code>void run(GuiceyEnvironment environment)</code> </li>
</ul>
<p>Move all registrations (extensions, modules, bundles) into first method. Guice modules may still be registered in 
<code>run</code> phase (for simplicity as guicey modules often required configuration values). </p>
<h3 id="multiple-instances-registration-bundles-modules">Multiple instances registration (bundles, modules)<a class="headerlink" href="#multiple-instances-registration-bundles-modules" title="Permanent link">&para;</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This change most likely will be the cause of your app behaviour change. So start investigating from here.</p>
</div>
<p>This version accepts registration of 
<a href="#multiple-bundles-and-modules-of-the-same-type-support">multiple instances of bundles and modules of the same type</a> 
(before only 1 instance of type was allowed).  </p>
<p>If you rely on this deduplication behaviour then most likely you will have now
duplicate bundle or module registrations.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>So if you see very strange behaviour on new version then recover old behavior with:
<div class="codehilite"><pre><span></span><span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">duplicateConfigDetector</span><span class="o">(</span><span class="k">new</span> <span class="n">LegacyModeDuplicatesDetector</span><span class="o">())</span>
</pre></div>
And check again. If weird behaviour disappear then you have duplicate configurations
if not - check if it's <a href="#guice-bindings-analysis">module analysis issue</a></p>
</div>
<p>In case of problems you can either stay in legacy mode or find the root cause.
To find duplicate registrations enable diagnostic reports:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">printDiagnosticInfo</span><span class="o">()</span>
</pre></div>

<p>In configuration summary section pay attention to <code>REG(n/m)</code> markers, like this:</p>
<div class="codehilite"><pre><span></span>GUICE MODULES =
        VMod                          (com.mycompany) *REG(2/4) 
</pre></div>

<p>In this example, guice module VMod was registered 4 timed, but only 2 instances were accepted.
Most likely in your case numbers would be equal (meaning all instances were used).  </p>
<p>Next, look into configuration tree in order to find configuration sources, and look for 
duplicated item registration. You should see something like:</p>
<div class="codehilite"><pre><span></span>    APPLICATION
    ├── module     VMod                       (com.mycompany) 
    ...   
    │   
    ├── SomeBundle                 (com.mycompany) 
    │   ├── module     VMod#2                    (com.mycompany)
    ...  
</pre></div>

<p>After that it should be clear how multiple instances appear.</p>
<div class="admonition note">
<p class="admonition-title">Possible scenario</p>
<p>As an example of what can happen: if you're using bundles lookup and were assuming before
that if bundle will be registered manually - lookup will be simply ignored. But now it's not
and multiple bundles will appear.</p>
</div>
<p>In order to fix multiple instances, correct equals method must be implemented.
Equals logic depends on your needs: you may need always only one instance, like before
or just remove instances with duplicate confiurations (with the same constructor parameters).</p>
<p>For "only 1 allowed" case, you can simply use provided <code>UniqueGuiceyBundle</code> or <code>UniqueModule</code> as base classes.
For example:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VMod</span> <span class="kd">extends</span> <span class="n">UiqueModule</span> <span class="o">{...}</span>
</pre></div>

<p>or</p>
<p>Or you can simply properly implement equals method. For example, if you want only one instance of
some guice module to be used then implement it's equals as </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VMod</span> <span class="kd">extends</span> <span class="n">AbstractModule</span> <span class="o">{</span>
    <span class="o">...</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="kd">final</span> <span class="n">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">obj</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">getClass</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">obj</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>And with this change, duplicates will be correctly avoided:</p>
<div class="codehilite"><pre><span></span>    APPLICATION
    ├── module     VMod                       (com.mycompany) 
    ...   
    │   
    ├── SomeBundle                 (com.mycompany) 
    │   ├── module     -VMod                    (com.mycompany) *DUPLICATE
    ...  
</pre></div>

<p>3<sup>rd</sup> party modules (where you can't implement equals method) may be deduplicated with</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">uniqueItems</span><span class="o">(</span><span class="n">Some3rdPathyModuel</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>

<p>Or (for special cases) completely custom implementation could be provided.
E.g. suppose we can't change VMod and add correct equals, then:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">duplicateConfigDetector</span><span class="o">((</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">registered</span><span class="o">,</span> <span class="n">Object</span> <span class="n">newItem</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
     <span class="k">if</span> <span class="o">(</span><span class="n">newItem</span> <span class="n">isntanceof</span> <span class="n">VMod</span><span class="o">)</span> <span class="o">{</span>
         <span class="c1">// decide if item collide with provided registered instances (of the same type)</span>
         <span class="k">return</span> <span class="n">registered</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
     <span class="o">}</span>           
     <span class="c1">// allow instance registration</span>
     <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>    
<span class="o">})</span>
</pre></div>

<p>Detector in all cases when another instance of already registered type appear and
equals check did not reveal duplicates (custom config called only after check if new item is equal to 
any of registered items).</p>
<p>Detector receive all accepted instances of this type and new item. It must return either "original item"
to mark this new as duplicate for it, or null to allow registration.</p>
<h3 id="guice-bindings-analysis">Guice bindings analysis<a class="headerlink" href="#guice-bindings-analysis" title="Permanent link">&para;</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Another point of potential migration problems</p>
</div>
<p>As guicey now <a href="../../guide/guice/module-analysis/#extensions-recognition">analyze bindings from registered guice modules</a> it could 
detect and install new extensions, declared in bindings. For example,</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">bind</span><span class="o">(</span><span class="n">MyResource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<p>MyResource will now be recognized and installed as extension  (this affects all supported extension types).</p>
<p>Also, <code>.disableExtension()</code> and <code>.disableModule()</code> could now affect internal bindings.</p>
<p>For example, if before some "extension" was detected as bean in guice module (like above) and
you have <code>.desableExtensions(MyResource.class)</code> then bindings will disappear now (but before nothing happens).</p>
<p>The same for modules:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyModule</span> <span class="kd">extends</span> <span class="n">AbstractModule</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">install</span><span class="o">(</span><span class="k">new</span> <span class="n">OtherMyModule</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>     

<span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">disableModules</span><span class="o">(</span><span class="n">OtherMyModule</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>    
</pre></div>

<p>Before, nothing happen and now <code>OtherMyModule</code> would be removed (all bindings of module).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If you have strange behaviour and it's not caused by <a href="#multiple-instances-registration-bundles-modules">configuration instances duplicates</a>
then it's probably new modules processing. Recover old behaviour with
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="n">GuiceyOptions</span><span class="o">.</span><span class="na">AnalyzeModules</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span>
</pre></div>
And check again. If weird behaviour disappear then you have either new recognized extensions 
or removed bindings (driven by disabled extensions or modules).</p>
</div>
<p>To investigate this problems use <code>.pringGuiceBindings()</code> report (with enabled analysis ofc.).
For example:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TransitiveModule</span> <span class="kd">extends</span> <span class="n">AbstractModule</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">bind</span><span class="o">(</span><span class="n">Ext1</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">bind</span><span class="o">(</span><span class="n">Ext2</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">install</span><span class="o">(</span><span class="k">new</span> <span class="n">InnerModule</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">InnerModule</span> <span class="kd">extends</span> <span class="n">AbstractModule</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">bind</span><span class="o">(</span><span class="n">Ext3</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span> 

<span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>                     
    <span class="o">.</span><span class="na">modules</span><span class="o">(</span><span class="k">new</span> <span class="n">TransitiveModule</span><span class="o">())</span>
    <span class="o">.</span><span class="na">disableModules</span><span class="o">(</span><span class="n">InnerModule</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="o">.</span><span class="na">disableExtensions</span><span class="o">(</span><span class="n">Ext2</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>   
    <span class="o">.</span><span class="na">pringGuiceBindings</span><span class="o">()</span>
</pre></div>

<p>will report:</p>
<div class="codehilite"><pre><span></span>2 MODULES with 2 bindings
    │   
    └── TransitiveModule             (com.mycompany)    
        ├── untargetted          [@Prototype]     Ext1                                            at com.mycompany.TransitiveModule.configure(TransitiveModule.java:15) *EXTENSION
        ├── untargetted          [@Prototype]     Ext2                                            at com.mycompany.TransitiveModule.configure(TransitiveModule.java:16) *EXTENSION, REMOVED
        └── InnerModule                   (com.mycompany.TransitiveModule) *REMOVED
</pre></div>

<p><code>InnerModule</code> and all of it's bindings were removed. <code>Ext2</code> was also removed (as disabled extension).</p>
<p>Or you can see only recognized bindings in configuration tree report <code>.printDiagnosticResport()</code>:</p>
<div class="codehilite"><pre><span></span>GUICE BINDINGS
        │   
        └── TransitiveModule             (com.mycompany)    
            ├── extension  Ext1                         (com.mycompany.TransitiveModule) 
            └── extension  -Ext2                        (com.mycompany.TransitiveModule) *DISABLED
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On diagnostic report extensions will appear below the top-level module
because this report shows everything registered by user. Detailed location could
be viewed in guice report (<code>.printGuiceBindings()</code>). </p>
</div>
<h3 id="test-hooks">Test hooks<a class="headerlink" href="#test-hooks" title="Permanent link">&para;</a></h3>
<p>If you were using guicey hooks for testing, then you will have to rename:</p>
<ul>
<li><code>GuiceyConfigurationRule</code> into <code>GuiceyHooksRule</code></li>
<li><code>@UseGuiceyConfiguration</code> (spock extension) into <code>@UseGuiceyHooks</code></li>
</ul>
<h3 id="removed-options">Removed options<a class="headerlink" href="#removed-options" title="Permanent link">&para;</a></h3>
<p><code>GuiceBundle.builder()#useWebInstallers()</code> was removed because <code>WebInstallersBundle</code> is 
activated by default and so you don't need to activate it anymore.</p>
<p>If you were using <code>GuiceyOptions.ConfigureFromDropwizardBundles</code> then consider using
<code>GuiceyBundle</code> now instead of combined dropwizard bundle (as guicey bundle is not limiting replacement now).</p>
<p>If you were using <code>GuiceyOptions.BindConfigurationInterfaces</code> then just annotate configuration
interfaces injection points with <code>@Config</code> (interface bindings are qualified).</p>
<h3 id="reporting_1">Reporting<a class="headerlink" href="#reporting_1" title="Permanent link">&para;</a></h3>
<p>If you were using <code>DiagnosticBundle</code> directly it is now <code>ConfigurationDiagnostic</code> listener.</p>
<p><code>DebugGuiceyLifecycle</code> was renamed to <code>LifecycleDiagnostic</code></p>
<p>All reports were moved into top-level package "debug".  </p>
<p>You don't need to enable guice statistics (injector creation) logs manually now: they would be 
intercepted automatically and show under diagnostics stats sub reprot (<code>.printDiagnosticInfo()</code>)</p>
<h3 id="extension-modules_1">Extension modules<a class="headerlink" href="#extension-modules_1" title="Permanent link">&para;</a></h3>
<p><code>SpaBundle</code> and <code>ServerPagesBundle</code> are guicey bundles now, so register them accordingly.</p>
<p><code>ServerPagesBundle.extendApp</code> is not just a static call anymore: now returned guicey bundle must be also registered.
If application is extended in the same bundle with registration (required extenions), it may now
be scpecified directly in application builder: <code>ServerPagesBundle.app(...).attachAssets(...)</code></p>
<h3 id="installers">Installers<a class="headerlink" href="#installers" title="Permanent link">&para;</a></h3>
<p>If you were writing custom installer, you'll have to update them.</p>
<p>First of all, remove redundant generic on <code>FeatureInstaller</code> interface:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyInstaller</span> <span class="kd">implements</span> <span class="n">FeatureInstaller</span><span class="o">&lt;</span><span class="n">Something</span><span class="o">&gt;</span> <span class="o">...</span>
</pre></div>

<p>Must become:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyInstaller</span> <span class="kd">implements</span> <span class="n">FeatureInstaller</span> <span class="o">...</span>
</pre></div>

<p><a href="#bindinginstaller">BindingInstaller</a> interface significantly changed due to 
extensions recognition <a href="#configuration-from-guice-bindings-jersey1-guice-style">directly from guice bindings</a></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../examples/jdbi3/" title="JDBI3" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                JDBI3
              </span>
            </div>
          </a>
        
        
          <a href="../compatibility/" title="Compatibility" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Compatibility
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2014-2019 Vyacheslav Rusakov
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/xvik" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/vyarus" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c648116f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>